{
"version":3,
"file":"module$node_modules$express$lib$response.js",
"lineCount":23,
"mappings":"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",
"sources":["node_modules/express/lib/response.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$express$lib$response\"] = function(global,require,module,exports) {\n/*!\n * express\n * Copyright(c) 2009-2013 TJ Holowaychuk\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar Buffer = require('safe-buffer').Buffer\nvar contentDisposition = require('content-disposition');\nvar deprecate = require('depd')('express');\nvar encodeUrl = require('encodeurl');\nvar escapeHtml = require('escape-html');\nvar http = require('http');\nvar isAbsolute = require('./utils').isAbsolute;\nvar onFinished = require('on-finished');\nvar path = require('path');\nvar statuses = require('statuses')\nvar merge = require('utils-merge');\nvar sign = require('cookie-signature').sign;\nvar normalizeType = require('./utils').normalizeType;\nvar normalizeTypes = require('./utils').normalizeTypes;\nvar setCharset = require('./utils').setCharset;\nvar cookie = require('cookie');\nvar send = require('send');\nvar extname = path.extname;\nvar mime = send.mime;\nvar resolve = path.resolve;\nvar vary = require('vary');\n\n/**\n * Response prototype.\n * @public\n */\n\nvar res = Object.create(http.ServerResponse.prototype)\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = res\n\n/**\n * Module variables.\n * @private\n */\n\nvar charsetRegExp = /;\\s*charset\\s*=/;\n\n/**\n * Set status `code`.\n *\n * @param {Number} code\n * @return {ServerResponse}\n * @public\n */\n\nres.status = function status(code) {\n  this.statusCode = code;\n  return this;\n};\n\n/**\n * Set Link header field with the given `links`.\n *\n * Examples:\n *\n *    res.links({\n *      next: 'http://api.example.com/users?page=2',\n *      last: 'http://api.example.com/users?page=5'\n *    });\n *\n * @param {Object} links\n * @return {ServerResponse}\n * @public\n */\n\nres.links = function(links){\n  var link = this.get('Link') || '';\n  if (link) link += ', ';\n  return this.set('Link', link + Object.keys(links).map(function(rel){\n    return '<' + links[rel] + '>; rel=\"' + rel + '\"';\n  }).join(', '));\n};\n\n/**\n * Send a response.\n *\n * Examples:\n *\n *     res.send(Buffer.from('wahoo'));\n *     res.send({ some: 'json' });\n *     res.send('<p>some html</p>');\n *\n * @param {string|number|boolean|object|Buffer} body\n * @public\n */\n\nres.send = function send(body) {\n  var chunk = body;\n  var encoding;\n  var req = this.req;\n  var type;\n\n  // settings\n  var app = this.app;\n\n  // allow status / body\n  if (arguments.length === 2) {\n    // res.send(body, status) backwards compat\n    if (typeof arguments[0] !== 'number' && typeof arguments[1] === 'number') {\n      deprecate('res.send(body, status): Use res.status(status).send(body) instead');\n      this.statusCode = arguments[1];\n    } else {\n      deprecate('res.send(status, body): Use res.status(status).send(body) instead');\n      this.statusCode = arguments[0];\n      chunk = arguments[1];\n    }\n  }\n\n  // disambiguate res.send(status) and res.send(status, num)\n  if (typeof chunk === 'number' && arguments.length === 1) {\n    // res.send(status) will set status message as text string\n    if (!this.get('Content-Type')) {\n      this.type('txt');\n    }\n\n    deprecate('res.send(status): Use res.sendStatus(status) instead');\n    this.statusCode = chunk;\n    chunk = statuses[chunk]\n  }\n\n  switch (typeof chunk) {\n    // string defaulting to html\n    case 'string':\n      if (!this.get('Content-Type')) {\n        this.type('html');\n      }\n      break;\n    case 'boolean':\n    case 'number':\n    case 'object':\n      if (chunk === null) {\n        chunk = '';\n      } else if (Buffer.isBuffer(chunk)) {\n        if (!this.get('Content-Type')) {\n          this.type('bin');\n        }\n      } else {\n        return this.json(chunk);\n      }\n      break;\n  }\n\n  // write strings in utf-8\n  if (typeof chunk === 'string') {\n    encoding = 'utf8';\n    type = this.get('Content-Type');\n\n    // reflect this in content-type\n    if (typeof type === 'string') {\n      this.set('Content-Type', setCharset(type, 'utf-8'));\n    }\n  }\n\n  // determine if ETag should be generated\n  var etagFn = app.get('etag fn')\n  var generateETag = !this.get('ETag') && typeof etagFn === 'function'\n\n  // populate Content-Length\n  var len\n  if (chunk !== undefined) {\n    if (Buffer.isBuffer(chunk)) {\n      // get length of Buffer\n      len = chunk.length\n    } else if (!generateETag && chunk.length < 1000) {\n      // just calculate length when no ETag + small chunk\n      len = Buffer.byteLength(chunk, encoding)\n    } else {\n      // convert chunk to Buffer and calculate\n      chunk = Buffer.from(chunk, encoding)\n      encoding = undefined;\n      len = chunk.length\n    }\n\n    this.set('Content-Length', len);\n  }\n\n  // populate ETag\n  var etag;\n  if (generateETag && len !== undefined) {\n    if ((etag = etagFn(chunk, encoding))) {\n      this.set('ETag', etag);\n    }\n  }\n\n  // freshness\n  if (req.fresh) this.statusCode = 304;\n\n  // strip irrelevant headers\n  if (204 === this.statusCode || 304 === this.statusCode) {\n    this.removeHeader('Content-Type');\n    this.removeHeader('Content-Length');\n    this.removeHeader('Transfer-Encoding');\n    chunk = '';\n  }\n\n  if (req.method === 'HEAD') {\n    // skip body for HEAD\n    this.end();\n  } else {\n    // respond\n    this.end(chunk, encoding);\n  }\n\n  return this;\n};\n\n/**\n * Send JSON response.\n *\n * Examples:\n *\n *     res.json(null);\n *     res.json({ user: 'tj' });\n *\n * @param {string|number|boolean|object} obj\n * @public\n */\n\nres.json = function json(obj) {\n  var val = obj;\n\n  // allow status / body\n  if (arguments.length === 2) {\n    // res.json(body, status) backwards compat\n    if (typeof arguments[1] === 'number') {\n      deprecate('res.json(obj, status): Use res.status(status).json(obj) instead');\n      this.statusCode = arguments[1];\n    } else {\n      deprecate('res.json(status, obj): Use res.status(status).json(obj) instead');\n      this.statusCode = arguments[0];\n      val = arguments[1];\n    }\n  }\n\n  // settings\n  var app = this.app;\n  var escape = app.get('json escape')\n  var replacer = app.get('json replacer');\n  var spaces = app.get('json spaces');\n  var body = stringify(val, replacer, spaces, escape)\n\n  // content-type\n  if (!this.get('Content-Type')) {\n    this.set('Content-Type', 'application/json');\n  }\n\n  return this.send(body);\n};\n\n/**\n * Send JSON response with JSONP callback support.\n *\n * Examples:\n *\n *     res.jsonp(null);\n *     res.jsonp({ user: 'tj' });\n *\n * @param {string|number|boolean|object} obj\n * @public\n */\n\nres.jsonp = function jsonp(obj) {\n  var val = obj;\n\n  // allow status / body\n  if (arguments.length === 2) {\n    // res.json(body, status) backwards compat\n    if (typeof arguments[1] === 'number') {\n      deprecate('res.jsonp(obj, status): Use res.status(status).json(obj) instead');\n      this.statusCode = arguments[1];\n    } else {\n      deprecate('res.jsonp(status, obj): Use res.status(status).jsonp(obj) instead');\n      this.statusCode = arguments[0];\n      val = arguments[1];\n    }\n  }\n\n  // settings\n  var app = this.app;\n  var escape = app.get('json escape')\n  var replacer = app.get('json replacer');\n  var spaces = app.get('json spaces');\n  var body = stringify(val, replacer, spaces, escape)\n  var callback = this.req.query[app.get('jsonp callback name')];\n\n  // content-type\n  if (!this.get('Content-Type')) {\n    this.set('X-Content-Type-Options', 'nosniff');\n    this.set('Content-Type', 'application/json');\n  }\n\n  // fixup callback\n  if (Array.isArray(callback)) {\n    callback = callback[0];\n  }\n\n  // jsonp\n  if (typeof callback === 'string' && callback.length !== 0) {\n    this.set('X-Content-Type-Options', 'nosniff');\n    this.set('Content-Type', 'text/javascript');\n\n    // restrict callback charset\n    callback = callback.replace(/[^\\[\\]\\w$.]/g, '');\n\n    // replace chars not allowed in JavaScript that are in JSON\n    body = body\n      .replace(/\\u2028/g, '\\\\u2028')\n      .replace(/\\u2029/g, '\\\\u2029');\n\n    // the /**/ is a specific security mitigation for \"Rosetta Flash JSONP abuse\"\n    // the typeof check is just to reduce client error noise\n    body = '/**/ typeof ' + callback + ' === \\'function\\' && ' + callback + '(' + body + ');';\n  }\n\n  return this.send(body);\n};\n\n/**\n * Send given HTTP status code.\n *\n * Sets the response status to `statusCode` and the body of the\n * response to the standard description from node's http.STATUS_CODES\n * or the statusCode number if no description.\n *\n * Examples:\n *\n *     res.sendStatus(200);\n *\n * @param {number} statusCode\n * @public\n */\n\nres.sendStatus = function sendStatus(statusCode) {\n  var body = statuses[statusCode] || String(statusCode)\n\n  this.statusCode = statusCode;\n  this.type('txt');\n\n  return this.send(body);\n};\n\n/**\n * Transfer the file at the given `path`.\n *\n * Automatically sets the _Content-Type_ response header field.\n * The callback `callback(err)` is invoked when the transfer is complete\n * or when an error occurs. Be sure to check `res.sentHeader`\n * if you wish to attempt responding, as the header and some data\n * may have already been transferred.\n *\n * Options:\n *\n *   - `maxAge`   defaulting to 0 (can be string converted by `ms`)\n *   - `root`     root directory for relative filenames\n *   - `headers`  object of headers to serve with file\n *   - `dotfiles` serve dotfiles, defaulting to false; can be `\"allow\"` to send them\n *\n * Other options are passed along to `send`.\n *\n * Examples:\n *\n *  The following example illustrates how `res.sendFile()` may\n *  be used as an alternative for the `static()` middleware for\n *  dynamic situations. The code backing `res.sendFile()` is actually\n *  the same code, so HTTP cache support etc is identical.\n *\n *     app.get('/user/:uid/photos/:file', function(req, res){\n *       var uid = req.params.uid\n *         , file = req.params.file;\n *\n *       req.user.mayViewFilesFrom(uid, function(yes){\n *         if (yes) {\n *           res.sendFile('/uploads/' + uid + '/' + file);\n *         } else {\n *           res.send(403, 'Sorry! you cant see that.');\n *         }\n *       });\n *     });\n *\n * @public\n */\n\nres.sendFile = function sendFile(path, options, callback) {\n  var done = callback;\n  var req = this.req;\n  var res = this;\n  var next = req.next;\n  var opts = options || {};\n\n  if (!path) {\n    throw new TypeError('path argument is required to res.sendFile');\n  }\n\n  if (typeof path !== 'string') {\n    throw new TypeError('path must be a string to res.sendFile')\n  }\n\n  // support function as second arg\n  if (typeof options === 'function') {\n    done = options;\n    opts = {};\n  }\n\n  if (!opts.root && !isAbsolute(path)) {\n    throw new TypeError('path must be absolute or specify root to res.sendFile');\n  }\n\n  // create file stream\n  var pathname = encodeURI(path);\n  var file = send(req, pathname, opts);\n\n  // transfer\n  sendfile(res, file, opts, function (err) {\n    if (done) return done(err);\n    if (err && err.code === 'EISDIR') return next();\n\n    // next() all but write errors\n    if (err && err.code !== 'ECONNABORTED' && err.syscall !== 'write') {\n      next(err);\n    }\n  });\n};\n\n/**\n * Transfer the file at the given `path`.\n *\n * Automatically sets the _Content-Type_ response header field.\n * The callback `callback(err)` is invoked when the transfer is complete\n * or when an error occurs. Be sure to check `res.sentHeader`\n * if you wish to attempt responding, as the header and some data\n * may have already been transferred.\n *\n * Options:\n *\n *   - `maxAge`   defaulting to 0 (can be string converted by `ms`)\n *   - `root`     root directory for relative filenames\n *   - `headers`  object of headers to serve with file\n *   - `dotfiles` serve dotfiles, defaulting to false; can be `\"allow\"` to send them\n *\n * Other options are passed along to `send`.\n *\n * Examples:\n *\n *  The following example illustrates how `res.sendfile()` may\n *  be used as an alternative for the `static()` middleware for\n *  dynamic situations. The code backing `res.sendfile()` is actually\n *  the same code, so HTTP cache support etc is identical.\n *\n *     app.get('/user/:uid/photos/:file', function(req, res){\n *       var uid = req.params.uid\n *         , file = req.params.file;\n *\n *       req.user.mayViewFilesFrom(uid, function(yes){\n *         if (yes) {\n *           res.sendfile('/uploads/' + uid + '/' + file);\n *         } else {\n *           res.send(403, 'Sorry! you cant see that.');\n *         }\n *       });\n *     });\n *\n * @public\n */\n\nres.sendfile = function (path, options, callback) {\n  var done = callback;\n  var req = this.req;\n  var res = this;\n  var next = req.next;\n  var opts = options || {};\n\n  // support function as second arg\n  if (typeof options === 'function') {\n    done = options;\n    opts = {};\n  }\n\n  // create file stream\n  var file = send(req, path, opts);\n\n  // transfer\n  sendfile(res, file, opts, function (err) {\n    if (done) return done(err);\n    if (err && err.code === 'EISDIR') return next();\n\n    // next() all but write errors\n    if (err && err.code !== 'ECONNABORTED' && err.syscall !== 'write') {\n      next(err);\n    }\n  });\n};\n\nres.sendfile = deprecate.function(res.sendfile,\n  'res.sendfile: Use res.sendFile instead');\n\n/**\n * Transfer the file at the given `path` as an attachment.\n *\n * Optionally providing an alternate attachment `filename`,\n * and optional callback `callback(err)`. The callback is invoked\n * when the data transfer is complete, or when an error has\n * ocurred. Be sure to check `res.headersSent` if you plan to respond.\n *\n * Optionally providing an `options` object to use with `res.sendFile()`.\n * This function will set the `Content-Disposition` header, overriding\n * any `Content-Disposition` header passed as header options in order\n * to set the attachment and filename.\n *\n * This method uses `res.sendFile()`.\n *\n * @public\n */\n\nres.download = function download (path, filename, options, callback) {\n  var done = callback;\n  var name = filename;\n  var opts = options || null\n\n  // support function as second or third arg\n  if (typeof filename === 'function') {\n    done = filename;\n    name = null;\n    opts = null\n  } else if (typeof options === 'function') {\n    done = options\n    opts = null\n  }\n\n  // set Content-Disposition when file is sent\n  var headers = {\n    'Content-Disposition': contentDisposition(name || path)\n  };\n\n  // merge user-provided headers\n  if (opts && opts.headers) {\n    var keys = Object.keys(opts.headers)\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i]\n      if (key.toLowerCase() !== 'content-disposition') {\n        headers[key] = opts.headers[key]\n      }\n    }\n  }\n\n  // merge user-provided options\n  opts = Object.create(opts)\n  opts.headers = headers\n\n  // Resolve the full path for sendFile\n  var fullPath = resolve(path);\n\n  // send file\n  return this.sendFile(fullPath, opts, done)\n};\n\n/**\n * Set _Content-Type_ response header with `type` through `mime.lookup()`\n * when it does not contain \"/\", or set the Content-Type to `type` otherwise.\n *\n * Examples:\n *\n *     res.type('.html');\n *     res.type('html');\n *     res.type('json');\n *     res.type('application/json');\n *     res.type('png');\n *\n * @param {String} type\n * @return {ServerResponse} for chaining\n * @public\n */\n\nres.contentType =\nres.type = function contentType(type) {\n  var ct = type.indexOf('/') === -1\n    ? mime.lookup(type)\n    : type;\n\n  return this.set('Content-Type', ct);\n};\n\n/**\n * Respond to the Acceptable formats using an `obj`\n * of mime-type callbacks.\n *\n * This method uses `req.accepted`, an array of\n * acceptable types ordered by their quality values.\n * When \"Accept\" is not present the _first_ callback\n * is invoked, otherwise the first match is used. When\n * no match is performed the server responds with\n * 406 \"Not Acceptable\".\n *\n * Content-Type is set for you, however if you choose\n * you may alter this within the callback using `res.type()`\n * or `res.set('Content-Type', ...)`.\n *\n *    res.format({\n *      'text/plain': function(){\n *        res.send('hey');\n *      },\n *\n *      'text/html': function(){\n *        res.send('<p>hey</p>');\n *      },\n *\n *      'appliation/json': function(){\n *        res.send({ message: 'hey' });\n *      }\n *    });\n *\n * In addition to canonicalized MIME types you may\n * also use extnames mapped to these types:\n *\n *    res.format({\n *      text: function(){\n *        res.send('hey');\n *      },\n *\n *      html: function(){\n *        res.send('<p>hey</p>');\n *      },\n *\n *      json: function(){\n *        res.send({ message: 'hey' });\n *      }\n *    });\n *\n * By default Express passes an `Error`\n * with a `.status` of 406 to `next(err)`\n * if a match is not made. If you provide\n * a `.default` callback it will be invoked\n * instead.\n *\n * @param {Object} obj\n * @return {ServerResponse} for chaining\n * @public\n */\n\nres.format = function(obj){\n  var req = this.req;\n  var next = req.next;\n\n  var fn = obj.default;\n  if (fn) delete obj.default;\n  var keys = Object.keys(obj);\n\n  var key = keys.length > 0\n    ? req.accepts(keys)\n    : false;\n\n  this.vary(\"Accept\");\n\n  if (key) {\n    this.set('Content-Type', normalizeType(key).value);\n    obj[key](req, this, next);\n  } else if (fn) {\n    fn();\n  } else {\n    var err = new Error('Not Acceptable');\n    err.status = err.statusCode = 406;\n    err.types = normalizeTypes(keys).map(function(o){ return o.value });\n    next(err);\n  }\n\n  return this;\n};\n\n/**\n * Set _Content-Disposition_ header to _attachment_ with optional `filename`.\n *\n * @param {String} filename\n * @return {ServerResponse}\n * @public\n */\n\nres.attachment = function attachment(filename) {\n  if (filename) {\n    this.type(extname(filename));\n  }\n\n  this.set('Content-Disposition', contentDisposition(filename));\n\n  return this;\n};\n\n/**\n * Append additional header `field` with value `val`.\n *\n * Example:\n *\n *    res.append('Link', ['<http://localhost/>', '<http://localhost:3000/>']);\n *    res.append('Set-Cookie', 'foo=bar; Path=/; HttpOnly');\n *    res.append('Warning', '199 Miscellaneous warning');\n *\n * @param {String} field\n * @param {String|Array} val\n * @return {ServerResponse} for chaining\n * @public\n */\n\nres.append = function append(field, val) {\n  var prev = this.get(field);\n  var value = val;\n\n  if (prev) {\n    // concat the new and prev vals\n    value = Array.isArray(prev) ? prev.concat(val)\n      : Array.isArray(val) ? [prev].concat(val)\n      : [prev, val];\n  }\n\n  return this.set(field, value);\n};\n\n/**\n * Set header `field` to `val`, or pass\n * an object of header fields.\n *\n * Examples:\n *\n *    res.set('Foo', ['bar', 'baz']);\n *    res.set('Accept', 'application/json');\n *    res.set({ Accept: 'text/plain', 'X-API-Key': 'tobi' });\n *\n * Aliased as `res.header()`.\n *\n * @param {String|Object} field\n * @param {String|Array} val\n * @return {ServerResponse} for chaining\n * @public\n */\n\nres.set =\nres.header = function header(field, val) {\n  if (arguments.length === 2) {\n    var value = Array.isArray(val)\n      ? val.map(String)\n      : String(val);\n\n    // add charset to content-type\n    if (field.toLowerCase() === 'content-type') {\n      if (Array.isArray(value)) {\n        throw new TypeError('Content-Type cannot be set to an Array');\n      }\n      if (!charsetRegExp.test(value)) {\n        var charset = mime.charsets.lookup(value.split(';')[0]);\n        if (charset) value += '; charset=' + charset.toLowerCase();\n      }\n    }\n\n    this.setHeader(field, value);\n  } else {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n  }\n  return this;\n};\n\n/**\n * Get value for header `field`.\n *\n * @param {String} field\n * @return {String}\n * @public\n */\n\nres.get = function(field){\n  return this.getHeader(field);\n};\n\n/**\n * Clear cookie `name`.\n *\n * @param {String} name\n * @param {Object} [options]\n * @return {ServerResponse} for chaining\n * @public\n */\n\nres.clearCookie = function clearCookie(name, options) {\n  var opts = merge({ expires: new Date(1), path: '/' }, options);\n\n  return this.cookie(name, '', opts);\n};\n\n/**\n * Set cookie `name` to `value`, with the given `options`.\n *\n * Options:\n *\n *    - `maxAge`   max-age in milliseconds, converted to `expires`\n *    - `signed`   sign the cookie\n *    - `path`     defaults to \"/\"\n *\n * Examples:\n *\n *    // \"Remember Me\" for 15 minutes\n *    res.cookie('rememberme', '1', { expires: new Date(Date.now() + 900000), httpOnly: true });\n *\n *    // same as above\n *    res.cookie('rememberme', '1', { maxAge: 900000, httpOnly: true })\n *\n * @param {String} name\n * @param {String|Object} value\n * @param {Object} [options]\n * @return {ServerResponse} for chaining\n * @public\n */\n\nres.cookie = function (name, value, options) {\n  var opts = merge({}, options);\n  var secret = this.req.secret;\n  var signed = opts.signed;\n\n  if (signed && !secret) {\n    throw new Error('cookieParser(\"secret\") required for signed cookies');\n  }\n\n  var val = typeof value === 'object'\n    ? 'j:' + JSON.stringify(value)\n    : String(value);\n\n  if (signed) {\n    val = 's:' + sign(val, secret);\n  }\n\n  if ('maxAge' in opts) {\n    opts.expires = new Date(Date.now() + opts.maxAge);\n    opts.maxAge /= 1000;\n  }\n\n  if (opts.path == null) {\n    opts.path = '/';\n  }\n\n  this.append('Set-Cookie', cookie.serialize(name, String(val), opts));\n\n  return this;\n};\n\n/**\n * Set the location header to `url`.\n *\n * The given `url` can also be \"back\", which redirects\n * to the _Referrer_ or _Referer_ headers or \"/\".\n *\n * Examples:\n *\n *    res.location('/foo/bar').;\n *    res.location('http://example.com');\n *    res.location('../login');\n *\n * @param {String} url\n * @return {ServerResponse} for chaining\n * @public\n */\n\nres.location = function location(url) {\n  var loc = url;\n\n  // \"back\" is an alias for the referrer\n  if (url === 'back') {\n    loc = this.req.get('Referrer') || '/';\n  }\n\n  // set location\n  return this.set('Location', encodeUrl(loc));\n};\n\n/**\n * Redirect to the given `url` with optional response `status`\n * defaulting to 302.\n *\n * The resulting `url` is determined by `res.location()`, so\n * it will play nicely with mounted apps, relative paths,\n * `\"back\"` etc.\n *\n * Examples:\n *\n *    res.redirect('/foo/bar');\n *    res.redirect('http://example.com');\n *    res.redirect(301, 'http://example.com');\n *    res.redirect('../login'); // /blog/post/1 -> /blog/login\n *\n * @public\n */\n\nres.redirect = function redirect(url) {\n  var address = url;\n  var body;\n  var status = 302;\n\n  // allow status / url\n  if (arguments.length === 2) {\n    if (typeof arguments[0] === 'number') {\n      status = arguments[0];\n      address = arguments[1];\n    } else {\n      deprecate('res.redirect(url, status): Use res.redirect(status, url) instead');\n      status = arguments[1];\n    }\n  }\n\n  // Set location header\n  address = this.location(address).get('Location');\n\n  // Support text/{plain,html} by default\n  this.format({\n    text: function(){\n      body = statuses[status] + '. Redirecting to ' + address\n    },\n\n    html: function(){\n      var u = escapeHtml(address);\n      body = '<p>' + statuses[status] + '. Redirecting to <a href=\"' + u + '\">' + u + '</a></p>'\n    },\n\n    default: function(){\n      body = '';\n    }\n  });\n\n  // Respond\n  this.statusCode = status;\n  this.set('Content-Length', Buffer.byteLength(body));\n\n  if (this.req.method === 'HEAD') {\n    this.end();\n  } else {\n    this.end(body);\n  }\n};\n\n/**\n * Add `field` to Vary. If already present in the Vary set, then\n * this call is simply ignored.\n *\n * @param {Array|String} field\n * @return {ServerResponse} for chaining\n * @public\n */\n\nres.vary = function(field){\n  // checks for back-compat\n  if (!field || (Array.isArray(field) && !field.length)) {\n    deprecate('res.vary(): Provide a field name');\n    return this;\n  }\n\n  vary(this, field);\n\n  return this;\n};\n\n/**\n * Render `view` with the given `options` and optional callback `fn`.\n * When a callback function is given a response will _not_ be made\n * automatically, otherwise a response of _200_ and _text/html_ is given.\n *\n * Options:\n *\n *  - `cache`     boolean hinting to the engine it should cache\n *  - `filename`  filename of the view being rendered\n *\n * @public\n */\n\nres.render = function render(view, options, callback) {\n  var app = this.req.app;\n  var done = callback;\n  var opts = options || {};\n  var req = this.req;\n  var self = this;\n\n  // support callback function as second arg\n  if (typeof options === 'function') {\n    done = options;\n    opts = {};\n  }\n\n  // merge res.locals\n  opts._locals = self.locals;\n\n  // default callback to respond\n  done = done || function (err, str) {\n    if (err) return req.next(err);\n    self.send(str);\n  };\n\n  // render\n  app.render(view, opts, done);\n};\n\n// pipe the send file stream\nfunction sendfile(res, file, options, callback) {\n  var done = false;\n  var streaming;\n\n  // request aborted\n  function onaborted() {\n    if (done) return;\n    done = true;\n\n    var err = new Error('Request aborted');\n    err.code = 'ECONNABORTED';\n    callback(err);\n  }\n\n  // directory\n  function ondirectory() {\n    if (done) return;\n    done = true;\n\n    var err = new Error('EISDIR, read');\n    err.code = 'EISDIR';\n    callback(err);\n  }\n\n  // errors\n  function onerror(err) {\n    if (done) return;\n    done = true;\n    callback(err);\n  }\n\n  // ended\n  function onend() {\n    if (done) return;\n    done = true;\n    callback();\n  }\n\n  // file\n  function onfile() {\n    streaming = false;\n  }\n\n  // finished\n  function onfinish(err) {\n    if (err && err.code === 'ECONNRESET') return onaborted();\n    if (err) return onerror(err);\n    if (done) return;\n\n    setImmediate(function () {\n      if (streaming !== false && !done) {\n        onaborted();\n        return;\n      }\n\n      if (done) return;\n      done = true;\n      callback();\n    });\n  }\n\n  // streaming\n  function onstream() {\n    streaming = true;\n  }\n\n  file.on('directory', ondirectory);\n  file.on('end', onend);\n  file.on('error', onerror);\n  file.on('file', onfile);\n  file.on('stream', onstream);\n  onFinished(res, onfinish);\n\n  if (options.headers) {\n    // set headers on successful transfer\n    file.on('headers', function headers(res) {\n      var obj = options.headers;\n      var keys = Object.keys(obj);\n\n      for (var i = 0; i < keys.length; i++) {\n        var k = keys[i];\n        res.setHeader(k, obj[k]);\n      }\n    });\n  }\n\n  // pipe\n  file.pipe(res);\n}\n\n/**\n * Stringify JSON, like JSON.stringify, but v8 optimized, with the\n * ability to escape characters that can trigger HTML sniffing.\n *\n * @param {*} value\n * @param {function} replaces\n * @param {number} spaces\n * @param {boolean} escape\n * @returns {string}\n * @private\n */\n\nfunction stringify (value, replacer, spaces, escape) {\n  // v8 checks arguments.length for optimizing simple call\n  // https://bugs.chromium.org/p/v8/issues/detail?id=4730\n  var json = replacer || spaces\n    ? JSON.stringify(value, replacer, spaces)\n    : JSON.stringify(value);\n\n  if (escape) {\n    json = json.replace(/[<>&]/g, function (c) {\n      switch (c.charCodeAt(0)) {\n        case 0x3c:\n          return '\\\\u003c'\n        case 0x3e:\n          return '\\\\u003e'\n        case 0x26:\n          return '\\\\u0026'\n        /* istanbul ignore next: unreachable default */\n        default:\n          return c\n      }\n    })\n  }\n\n  return json\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","sendfile","res","file","options","callback","onaborted","done","err","Error","code","onerror","streaming","on","ondirectory","onend","onfile","onstream","onFinished","onfinish","setImmediate","headers","obj","keys","Object","i","length","k","setHeader","pipe","stringify","value","replacer","spaces","escape","json","JSON","replace","c","charCodeAt","Buffer","contentDisposition","deprecate","encodeUrl","escapeHtml","http","isAbsolute","path","statuses","merge","sign","normalizeType","normalizeTypes","setCharset","cookie","send","extname","mime","resolve","vary","create","ServerResponse","prototype","charsetRegExp","status","res.status","statusCode","links","res.links","link","get","set","map","rel","join","res.send","body","chunk","req","app","arguments","type","isBuffer","encoding","etagFn","generateETag","undefined","len","byteLength","from","etag","fresh","removeHeader","method","end","res.json","val","jsonp","res.jsonp","query","Array","isArray","sendStatus","res.sendStatus","String","sendFile","res.sendFile","next","opts","TypeError","root","pathname","encodeURI","syscall","res.sendfile","function","download","res.download","filename","name","key","toLowerCase","fullPath","contentType","res.type","ct","indexOf","lookup","format","res.format","fn","default","accepts","types","o","attachment","res.attachment","append","res.append","field","prev","concat","header","res.header","test","charset","charsets","split","res.get","getHeader","clearCookie","res.clearCookie","expires","Date","res.cookie","secret","signed","now","maxAge","serialize","location","res.location","url","loc","redirect","res.redirect","address","text","html","u","res.vary","render","res.render","view","self","_locals","locals","str"]
}
