shadow$provide.module$node_modules$peer$dist$src$api$index=function(global,require,module,exports){global=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{"default":mod}};Object.defineProperty(exports,"__esModule",{value:!0});var body_parser_1=global(require("module$node_modules$body_parser$index")),cors_1=global(require("module$node_modules$cors$lib$index")),express_1=global(require("module$node_modules$express$index")),app_json_1=global(require("module$node_modules$peer$dist$app_json")),
auth_1=require("module$node_modules$peer$dist$src$api$middleware$auth$index"),calls_1=global(require("module$node_modules$peer$dist$src$api$v1$calls$index")),public_1=global(require("module$node_modules$peer$dist$src$api$v1$public$index"));exports.Api=function($jscomp$destructuring$var25){var config=$jscomp$destructuring$var25.config,realm=$jscomp$destructuring$var25.realm;$jscomp$destructuring$var25=$jscomp$destructuring$var25.messageHandler;var authMiddleware=new auth_1.AuthMiddleware(config,realm),
app=express_1.default.Router(),jsonParser=body_parser_1.default.json();app.use(cors_1.default());app.get("/",function(_,res){res.send(app_json_1.default)});app.use("/:key",public_1.default({config:config,realm:realm}));app.use("/:key/:id/:token",authMiddleware.handle,jsonParser,calls_1.default({realm:realm,messageHandler:$jscomp$destructuring$var25}));return app}}
//# sourceMappingURL=module$node_modules$peer$dist$src$api$index.js.map
