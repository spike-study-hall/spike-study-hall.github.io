shadow$provide.module$node_modules$content_disposition$index=function(global,require,module,exports){function pdecode(str,hex){return String.fromCharCode(parseInt(hex,16))}function pencode(char){return"%"+String(char).charCodeAt(0).toString(16).toUpperCase()}function ContentDisposition(type,parameters){this.type=type;this.parameters=parameters}module.exports=function(filename,options){var opts=options||{};options=opts.type||"attachment";var fallback=opts.fallback;if(void 0===filename)opts=void 0;
else{opts={};if("string"!==typeof filename)throw new TypeError("filename must be a string");void 0===fallback&&(fallback=!0);if("string"!==typeof fallback&&"boolean"!==typeof fallback)throw new TypeError("fallback must be a string or boolean");if("string"===typeof fallback&&NON_LATIN1_REGEXP.test(fallback))throw new TypeError("fallback must be ISO-8859-1 string");filename=basename(filename);var isQuotedString=TEXT_REGEXP.test(filename);fallback="string"!==typeof fallback?fallback&&String(filename).replace(NON_LATIN1_REGEXP,
"?"):basename(fallback);var hasFallback="string"===typeof fallback&&fallback!==filename;if(hasFallback||!isQuotedString||HEX_ESCAPE_REGEXP.test(filename))opts["filename*"]=filename;if(isQuotedString||hasFallback)opts.filename=hasFallback?fallback:filename}opts=new ContentDisposition(options,opts);options=opts.parameters;opts=opts.type;if(!opts||"string"!==typeof opts||!TOKEN_REGEXP.test(opts))throw new TypeError("invalid type");opts=String(opts).toLowerCase();if(options&&"object"===typeof options)for(isQuotedString=
Object.keys(options).sort(),fallback=0;fallback<isQuotedString.length;fallback++)filename=isQuotedString[fallback],hasFallback="*"===filename.substr(-1)?"UTF-8''"+encodeURIComponent(String(options[filename])).replace(ENCODE_URL_ATTR_CHAR_REGEXP,pencode):'"'+String(options[filename]).replace(QUOTE_REGEXP,"\\$1")+'"',opts+="; "+filename+"\x3d"+hasFallback;return opts};module.exports.parse=function(string){if(!string||"string"!==typeof string)throw new TypeError("argument string is required");var match=
DISPOSITION_TYPE_REGEXP.exec(string);if(!match)throw new TypeError("invalid type format");var index=match[0].length,type=match[1].toLowerCase(),names=[],params={};for(index=PARAM_REGEXP.lastIndex=";"===match[0].substr(-1)?index-1:index;match=PARAM_REGEXP.exec(string);){if(match.index!==index)throw new TypeError("invalid parameter format");index+=match[0].length;var key=match[1].toLowerCase();match=match[2];if(-1!==names.indexOf(key))throw new TypeError("invalid duplicate parameter");names.push(key);
if(key.indexOf("*")+1===key.length){key=key.slice(0,-1);var match$jscomp$0=EXT_VALUE_REGEXP.exec(match);if(!match$jscomp$0)throw new TypeError("invalid extended field value");match=match$jscomp$0[1].toLowerCase();match$jscomp$0=match$jscomp$0[2].replace(HEX_ESCAPE_REPLACE_REGEXP,pdecode);switch(match){case "iso-8859-1":match=String(match$jscomp$0).replace(NON_LATIN1_REGEXP,"?");break;case "utf-8":match=Buffer.from(match$jscomp$0,"binary").toString("utf8");break;default:throw new TypeError("unsupported charset in extended field");
}params[key]=match}else"string"!==typeof params[key]&&('"'===match[0]&&(match=match.substr(1,match.length-2).replace(QESC_REGEXP,"$1")),params[key]=match)}if(-1!==index&&index!==string.length)throw new TypeError("invalid parameter format");return new ContentDisposition(type,params)};var basename=require("module$node_modules$path_browserify$index").basename,Buffer=require("module$node_modules$safe_buffer$index").Buffer,ENCODE_URL_ATTR_CHAR_REGEXP=/[\x00-\x20"'()*,/:;<=>?@[\\\]{}\x7f]/g,HEX_ESCAPE_REGEXP=
/%[0-9A-Fa-f]{2}/,HEX_ESCAPE_REPLACE_REGEXP=/%([0-9A-Fa-f]{2})/g,NON_LATIN1_REGEXP=/[^\x20-\x7e\xa0-\xff]/g,QESC_REGEXP=/\\([\u0000-\u007f])/g,QUOTE_REGEXP=/([\\"])/g,PARAM_REGEXP=/;[\x09\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*=[\x09\x20]*("(?:[\x20!\x23-\x5b\x5d-\x7e\x80-\xff]|\\[\x20-\x7e])*"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*/g,TEXT_REGEXP=/^[\x20-\x7e\x80-\xff]+$/,TOKEN_REGEXP=/^[!#$%&'*+.0-9A-Z^_`a-z|~-]+$/,EXT_VALUE_REGEXP=/^([A-Za-z0-9!#$%&+\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/,
DISPOSITION_TYPE_REGEXP=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\x09\x20]*(?:$|;)/}
//# sourceMappingURL=module$node_modules$content_disposition$index.js.map
