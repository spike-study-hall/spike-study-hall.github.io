shadow$provide.module$node_modules$express$lib$router$layer=function(global,require,module,exports){function Layer(path,options,fn){if(!(this instanceof Layer))return new Layer(path,options,fn);debug("new %o",path);options=options||{};this.handle=fn;this.name=fn.name||"\x3canonymous\x3e";this.path=this.params=void 0;this.regexp=pathRegexp(path,this.keys=[],options);this.regexp.fast_star="*"===path;this.regexp.fast_slash="/"===path&&!1===options.end}function decode_param(val){if("string"!==typeof val||
0===val.length)return val;try{return decodeURIComponent(val)}catch(err){throw err instanceof URIError&&(err.message="Failed to decode param '"+val+"'",err.status=err.statusCode=400),err;}}var pathRegexp=require("module$node_modules$path_to_regexp$index"),debug=require("module$node_modules$debug$src$browser")("express:router:layer"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=Layer;Layer.prototype.handle_error=function(error,req,res,next){var fn=this.handle;if(4!==fn.length)return next(error);
try{fn(error,req,res,next)}catch(err){next(err)}};Layer.prototype.handle_request=function(req,res,next){var fn=this.handle;if(3<fn.length)return next();try{fn(req,res,next)}catch(err){next(err)}};Layer.prototype.match=function(path){if(null!=path){if(this.regexp.fast_slash)return this.params={},this.path="",!0;if(this.regexp.fast_star)return this.params={0:decode_param(path)},this.path=path,!0;var match=this.regexp.exec(path)}if(!match)return this.path=this.params=void 0,!1;this.params={};this.path=
match[0];path=this.keys;for(var params=this.params,i=1;i<match.length;i++){var prop=path[i-1].name,val=decode_param(match[i]);void 0===val&&hasOwnProperty.call(params,prop)||(params[prop]=val)}return!0}}
//# sourceMappingURL=module$node_modules$express$lib$router$layer.js.map
