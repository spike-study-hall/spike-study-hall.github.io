shadow$provide.module$node_modules$peer$dist$src$messageHandler$handlers$transmission$index=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var enums_1=require("module$node_modules$peer$dist$src$enums");exports.TransmissionHandler=function($jscomp$destructuring$var13){var realm=$jscomp$destructuring$var13.realm,handle=function(client,message){var type=message.type,srcId=message.src,dstId=message.dst,destinationClient=realm.getClientById(dstId);if(destinationClient){type=
destinationClient.getSocket();try{if(type){var data=JSON.stringify(message);type.send(data)}else throw Error("Peer dead");}catch(e){type?type.close():realm.removeClientById(destinationClient.getId()),handle(client,{type:enums_1.MessageType.LEAVE,src:dstId,dst:srcId})}}else![enums_1.MessageType.LEAVE,enums_1.MessageType.EXPIRE].includes(type)&&dstId?realm.addMessageToQueue(dstId,message):type!==enums_1.MessageType.LEAVE||dstId||realm.removeClientById(srcId);return!0};return handle}}
//# sourceMappingURL=module$node_modules$peer$dist$src$messageHandler$handlers$transmission$index.js.map
