{
"version":3,
"file":"module$node_modules$ws$lib$Extensions.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/ws/lib/Extensions.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$ws$lib$Extensions\"] = function(global,require,module,exports) {\n'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push (dest, name, elem) {\n  if (Object.prototype.hasOwnProperty.call(dest, name)) dest[name].push(elem);\n  else dest[name] = [elem];\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse (header) {\n  const offers = {};\n\n  if (header === undefined || header === '') return offers;\n\n  var params = {};\n  var mustUnescape = false;\n  var isEscaping = false;\n  var inQuotes = false;\n  var extensionName;\n  var paramName;\n  var start = -1;\n  var end = -1;\n\n  for (var i = 0; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20/* ' ' */|| code === 0x09/* '\\t' */) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b/* ';' */ || code === 0x2c/* ',' */) {\n        if (start === -1) throw new Error(`unexpected character at index ${i}`);\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = {};\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new Error(`unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) throw new Error(`unexpected character at index ${i}`);\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = {};\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d/* '=' */&& start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new Error(`unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new Error(`unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22/* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c/* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new Error(`unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) throw new Error(`unexpected character at index ${i}`);\n\n        if (end === -1) end = i;\n        var value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = {};\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new Error(`unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes) throw new Error('unexpected end of input');\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, {});\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Serializes a parsed `Sec-WebSocket-Extensions` header to a string.\n *\n * @param {Object} value The object to format\n * @return {String} A string representing the given value\n * @public\n */\nfunction format (value) {\n  return Object.keys(value).map((token) => {\n    var paramsList = value[token];\n    if (!Array.isArray(paramsList)) paramsList = [paramsList];\n    return paramsList.map((params) => {\n      return [token].concat(Object.keys(params).map((k) => {\n        var p = params[k];\n        if (!Array.isArray(p)) p = [p];\n        return p.map((v) => v === true ? k : `${k}=${v}`).join('; ');\n      })).join('; ');\n    }).join(', ');\n  }).join(', ');\n}\n\nmodule.exports = { format, parse };\n\n};"],
"names":["shadow$provide","global","require","module","exports","push","dest","name","elem","Object","prototype","hasOwnProperty","call","tokenChars","format","value","keys","map","token","paramsList","Array","isArray","params","concat","k","p","v","join","parse","header","offers","undefined","mustUnescape","isEscaping","inQuotes","extensionName","paramName","start","end","i","length","code","charCodeAt","Error","slice","replace"]
}
