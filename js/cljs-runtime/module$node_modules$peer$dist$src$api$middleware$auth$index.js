shadow$provide.module$node_modules$peer$dist$src$api$middleware$auth$index=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var enums_1=require("module$node_modules$peer$dist$src$enums");exports.AuthMiddleware=function(config,realm){var $jscomp$this=this;this.config=config;this.realm=realm;this.handle=function(req,res,next){var $jscomp$destructuring$var18=req.params,id=$jscomp$destructuring$var18.id;req=$jscomp$destructuring$var18.token;if($jscomp$destructuring$var18.key!==
$jscomp$this.config.key)return res.status(401).send(enums_1.Errors.INVALID_KEY);if(!id)return res.sendStatus(401);$jscomp$destructuring$var18=$jscomp$this.realm.getClientById(id);if(!$jscomp$destructuring$var18)return res.sendStatus(401);if($jscomp$destructuring$var18.getToken()&&req!==$jscomp$destructuring$var18.getToken())return res.status(401).send(enums_1.Errors.INVALID_TOKEN);next()}}}
//# sourceMappingURL=module$node_modules$peer$dist$src$api$middleware$auth$index.js.map
