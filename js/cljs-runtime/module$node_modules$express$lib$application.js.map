{
"version":3,
"file":"module$node_modules$express$lib$application.js",
"lineCount":13,
"mappings":"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",
"sources":["node_modules/express/lib/application.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$express$lib$application\"] = function(global,require,module,exports) {\n/*!\n * express\n * Copyright(c) 2009-2013 TJ Holowaychuk\n * Copyright(c) 2013 Roman Shtylman\n * Copyright(c) 2014-2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar finalhandler = require('finalhandler');\nvar Router = require('./router');\nvar methods = require('methods');\nvar middleware = require('./middleware/init');\nvar query = require('./middleware/query');\nvar debug = require('debug')('express:application');\nvar View = require('./view');\nvar http = require('http');\nvar compileETag = require('./utils').compileETag;\nvar compileQueryParser = require('./utils').compileQueryParser;\nvar compileTrust = require('./utils').compileTrust;\nvar deprecate = require('depd')('express');\nvar flatten = require('array-flatten');\nvar merge = require('utils-merge');\nvar resolve = require('path').resolve;\nvar setPrototypeOf = require('setprototypeof')\nvar slice = Array.prototype.slice;\n\n/**\n * Application prototype.\n */\n\nvar app = exports = module.exports = {};\n\n/**\n * Variable for trust proxy inheritance back-compat\n * @private\n */\n\nvar trustProxyDefaultSymbol = '@@symbol:trust_proxy_default';\n\n/**\n * Initialize the server.\n *\n *   - setup default configuration\n *   - setup default middleware\n *   - setup route reflection methods\n *\n * @private\n */\n\napp.init = function init() {\n  this.cache = {};\n  this.engines = {};\n  this.settings = {};\n\n  this.defaultConfiguration();\n};\n\n/**\n * Initialize application configuration.\n * @private\n */\n\napp.defaultConfiguration = function defaultConfiguration() {\n  var env = process.env.NODE_ENV || 'development';\n\n  // default settings\n  this.enable('x-powered-by');\n  this.set('etag', 'weak');\n  this.set('env', env);\n  this.set('query parser', 'extended');\n  this.set('subdomain offset', 2);\n  this.set('trust proxy', false);\n\n  // trust proxy inherit back-compat\n  Object.defineProperty(this.settings, trustProxyDefaultSymbol, {\n    configurable: true,\n    value: true\n  });\n\n  debug('booting in %s mode', env);\n\n  this.on('mount', function onmount(parent) {\n    // inherit trust proxy\n    if (this.settings[trustProxyDefaultSymbol] === true\n      && typeof parent.settings['trust proxy fn'] === 'function') {\n      delete this.settings['trust proxy'];\n      delete this.settings['trust proxy fn'];\n    }\n\n    // inherit protos\n    setPrototypeOf(this.request, parent.request)\n    setPrototypeOf(this.response, parent.response)\n    setPrototypeOf(this.engines, parent.engines)\n    setPrototypeOf(this.settings, parent.settings)\n  });\n\n  // setup locals\n  this.locals = Object.create(null);\n\n  // top-most app is mounted at /\n  this.mountpath = '/';\n\n  // default locals\n  this.locals.settings = this.settings;\n\n  // default configuration\n  this.set('view', View);\n  this.set('views', resolve('views'));\n  this.set('jsonp callback name', 'callback');\n\n  if (env === 'production') {\n    this.enable('view cache');\n  }\n\n  Object.defineProperty(this, 'router', {\n    get: function() {\n      throw new Error('\\'app.router\\' is deprecated!\\nPlease see the 3.x to 4.x migration guide for details on how to update your app.');\n    }\n  });\n};\n\n/**\n * lazily adds the base router if it has not yet been added.\n *\n * We cannot add the base router in the defaultConfiguration because\n * it reads app settings which might be set after that has run.\n *\n * @private\n */\napp.lazyrouter = function lazyrouter() {\n  if (!this._router) {\n    this._router = new Router({\n      caseSensitive: this.enabled('case sensitive routing'),\n      strict: this.enabled('strict routing')\n    });\n\n    this._router.use(query(this.get('query parser fn')));\n    this._router.use(middleware.init(this));\n  }\n};\n\n/**\n * Dispatch a req, res pair into the application. Starts pipeline processing.\n *\n * If no callback is provided, then default error handlers will respond\n * in the event of an error bubbling through the stack.\n *\n * @private\n */\n\napp.handle = function handle(req, res, callback) {\n  var router = this._router;\n\n  // final handler\n  var done = callback || finalhandler(req, res, {\n    env: this.get('env'),\n    onerror: logerror.bind(this)\n  });\n\n  // no routes\n  if (!router) {\n    debug('no routes defined on app');\n    done();\n    return;\n  }\n\n  router.handle(req, res, done);\n};\n\n/**\n * Proxy `Router#use()` to add middleware to the app router.\n * See Router#use() documentation for details.\n *\n * If the _fn_ parameter is an express app, then it will be\n * mounted at the _route_ specified.\n *\n * @public\n */\n\napp.use = function use(fn) {\n  var offset = 0;\n  var path = '/';\n\n  // default path to '/'\n  // disambiguate app.use([fn])\n  if (typeof fn !== 'function') {\n    var arg = fn;\n\n    while (Array.isArray(arg) && arg.length !== 0) {\n      arg = arg[0];\n    }\n\n    // first arg is the path\n    if (typeof arg !== 'function') {\n      offset = 1;\n      path = fn;\n    }\n  }\n\n  var fns = flatten(slice.call(arguments, offset));\n\n  if (fns.length === 0) {\n    throw new TypeError('app.use() requires a middleware function')\n  }\n\n  // setup router\n  this.lazyrouter();\n  var router = this._router;\n\n  fns.forEach(function (fn) {\n    // non-express app\n    if (!fn || !fn.handle || !fn.set) {\n      return router.use(path, fn);\n    }\n\n    debug('.use app under %s', path);\n    fn.mountpath = path;\n    fn.parent = this;\n\n    // restore .app property on req and res\n    router.use(path, function mounted_app(req, res, next) {\n      var orig = req.app;\n      fn.handle(req, res, function (err) {\n        setPrototypeOf(req, orig.request)\n        setPrototypeOf(res, orig.response)\n        next(err);\n      });\n    });\n\n    // mounted an app\n    fn.emit('mount', this);\n  }, this);\n\n  return this;\n};\n\n/**\n * Proxy to the app `Router#route()`\n * Returns a new `Route` instance for the _path_.\n *\n * Routes are isolated middleware stacks for specific paths.\n * See the Route api docs for details.\n *\n * @public\n */\n\napp.route = function route(path) {\n  this.lazyrouter();\n  return this._router.route(path);\n};\n\n/**\n * Register the given template engine callback `fn`\n * as `ext`.\n *\n * By default will `require()` the engine based on the\n * file extension. For example if you try to render\n * a \"foo.ejs\" file Express will invoke the following internally:\n *\n *     app.engine('ejs', require('ejs').__express);\n *\n * For engines that do not provide `.__express` out of the box,\n * or if you wish to \"map\" a different extension to the template engine\n * you may use this method. For example mapping the EJS template engine to\n * \".html\" files:\n *\n *     app.engine('html', require('ejs').renderFile);\n *\n * In this case EJS provides a `.renderFile()` method with\n * the same signature that Express expects: `(path, options, callback)`,\n * though note that it aliases this method as `ejs.__express` internally\n * so if you're using \".ejs\" extensions you dont need to do anything.\n *\n * Some template engines do not follow this convention, the\n * [Consolidate.js](https://github.com/tj/consolidate.js)\n * library was created to map all of node's popular template\n * engines to follow this convention, thus allowing them to\n * work seamlessly within Express.\n *\n * @param {String} ext\n * @param {Function} fn\n * @return {app} for chaining\n * @public\n */\n\napp.engine = function engine(ext, fn) {\n  if (typeof fn !== 'function') {\n    throw new Error('callback function required');\n  }\n\n  // get file extension\n  var extension = ext[0] !== '.'\n    ? '.' + ext\n    : ext;\n\n  // store engine\n  this.engines[extension] = fn;\n\n  return this;\n};\n\n/**\n * Proxy to `Router#param()` with one added api feature. The _name_ parameter\n * can be an array of names.\n *\n * See the Router#param() docs for more details.\n *\n * @param {String|Array} name\n * @param {Function} fn\n * @return {app} for chaining\n * @public\n */\n\napp.param = function param(name, fn) {\n  this.lazyrouter();\n\n  if (Array.isArray(name)) {\n    for (var i = 0; i < name.length; i++) {\n      this.param(name[i], fn);\n    }\n\n    return this;\n  }\n\n  this._router.param(name, fn);\n\n  return this;\n};\n\n/**\n * Assign `setting` to `val`, or return `setting`'s value.\n *\n *    app.set('foo', 'bar');\n *    app.set('foo');\n *    // => \"bar\"\n *\n * Mounted servers inherit their parent server's settings.\n *\n * @param {String} setting\n * @param {*} [val]\n * @return {Server} for chaining\n * @public\n */\n\napp.set = function set(setting, val) {\n  if (arguments.length === 1) {\n    // app.get(setting)\n    return this.settings[setting];\n  }\n\n  debug('set \"%s\" to %o', setting, val);\n\n  // set value\n  this.settings[setting] = val;\n\n  // trigger matched settings\n  switch (setting) {\n    case 'etag':\n      this.set('etag fn', compileETag(val));\n      break;\n    case 'query parser':\n      this.set('query parser fn', compileQueryParser(val));\n      break;\n    case 'trust proxy':\n      this.set('trust proxy fn', compileTrust(val));\n\n      // trust proxy inherit back-compat\n      Object.defineProperty(this.settings, trustProxyDefaultSymbol, {\n        configurable: true,\n        value: false\n      });\n\n      break;\n  }\n\n  return this;\n};\n\n/**\n * Return the app's absolute pathname\n * based on the parent(s) that have\n * mounted it.\n *\n * For example if the application was\n * mounted as \"/admin\", which itself\n * was mounted as \"/blog\" then the\n * return value would be \"/blog/admin\".\n *\n * @return {String}\n * @private\n */\n\napp.path = function path() {\n  return this.parent\n    ? this.parent.path() + this.mountpath\n    : '';\n};\n\n/**\n * Check if `setting` is enabled (truthy).\n *\n *    app.enabled('foo')\n *    // => false\n *\n *    app.enable('foo')\n *    app.enabled('foo')\n *    // => true\n *\n * @param {String} setting\n * @return {Boolean}\n * @public\n */\n\napp.enabled = function enabled(setting) {\n  return Boolean(this.set(setting));\n};\n\n/**\n * Check if `setting` is disabled.\n *\n *    app.disabled('foo')\n *    // => true\n *\n *    app.enable('foo')\n *    app.disabled('foo')\n *    // => false\n *\n * @param {String} setting\n * @return {Boolean}\n * @public\n */\n\napp.disabled = function disabled(setting) {\n  return !this.set(setting);\n};\n\n/**\n * Enable `setting`.\n *\n * @param {String} setting\n * @return {app} for chaining\n * @public\n */\n\napp.enable = function enable(setting) {\n  return this.set(setting, true);\n};\n\n/**\n * Disable `setting`.\n *\n * @param {String} setting\n * @return {app} for chaining\n * @public\n */\n\napp.disable = function disable(setting) {\n  return this.set(setting, false);\n};\n\n/**\n * Delegate `.VERB(...)` calls to `router.VERB(...)`.\n */\n\nmethods.forEach(function(method){\n  app[method] = function(path){\n    if (method === 'get' && arguments.length === 1) {\n      // app.get(setting)\n      return this.set(path);\n    }\n\n    this.lazyrouter();\n\n    var route = this._router.route(path);\n    route[method].apply(route, slice.call(arguments, 1));\n    return this;\n  };\n});\n\n/**\n * Special-cased \"all\" method, applying the given route `path`,\n * middleware, and callback to _every_ HTTP method.\n *\n * @param {String} path\n * @param {Function} ...\n * @return {app} for chaining\n * @public\n */\n\napp.all = function all(path) {\n  this.lazyrouter();\n\n  var route = this._router.route(path);\n  var args = slice.call(arguments, 1);\n\n  for (var i = 0; i < methods.length; i++) {\n    route[methods[i]].apply(route, args);\n  }\n\n  return this;\n};\n\n// del -> delete alias\n\napp.del = deprecate.function(app.delete, 'app.del: Use app.delete instead');\n\n/**\n * Render the given view `name` name with `options`\n * and a callback accepting an error and the\n * rendered template string.\n *\n * Example:\n *\n *    app.render('email', { name: 'Tobi' }, function(err, html){\n *      // ...\n *    })\n *\n * @param {String} name\n * @param {Object|Function} options or fn\n * @param {Function} callback\n * @public\n */\n\napp.render = function render(name, options, callback) {\n  var cache = this.cache;\n  var done = callback;\n  var engines = this.engines;\n  var opts = options;\n  var renderOptions = {};\n  var view;\n\n  // support callback function as second arg\n  if (typeof options === 'function') {\n    done = options;\n    opts = {};\n  }\n\n  // merge app.locals\n  merge(renderOptions, this.locals);\n\n  // merge options._locals\n  if (opts._locals) {\n    merge(renderOptions, opts._locals);\n  }\n\n  // merge options\n  merge(renderOptions, opts);\n\n  // set .cache unless explicitly provided\n  if (renderOptions.cache == null) {\n    renderOptions.cache = this.enabled('view cache');\n  }\n\n  // primed cache\n  if (renderOptions.cache) {\n    view = cache[name];\n  }\n\n  // view\n  if (!view) {\n    var View = this.get('view');\n\n    view = new View(name, {\n      defaultEngine: this.get('view engine'),\n      root: this.get('views'),\n      engines: engines\n    });\n\n    if (!view.path) {\n      var dirs = Array.isArray(view.root) && view.root.length > 1\n        ? 'directories \"' + view.root.slice(0, -1).join('\", \"') + '\" or \"' + view.root[view.root.length - 1] + '\"'\n        : 'directory \"' + view.root + '\"'\n      var err = new Error('Failed to lookup view \"' + name + '\" in views ' + dirs);\n      err.view = view;\n      return done(err);\n    }\n\n    // prime the cache\n    if (renderOptions.cache) {\n      cache[name] = view;\n    }\n  }\n\n  // render\n  tryRender(view, renderOptions, done);\n};\n\n/**\n * Listen for connections.\n *\n * A node `http.Server` is returned, with this\n * application (which is a `Function`) as its\n * callback. If you wish to create both an HTTP\n * and HTTPS server you may do so with the \"http\"\n * and \"https\" modules as shown here:\n *\n *    var http = require('http')\n *      , https = require('https')\n *      , express = require('express')\n *      , app = express();\n *\n *    http.createServer(app).listen(80);\n *    https.createServer({ ... }, app).listen(443);\n *\n * @return {http.Server}\n * @public\n */\n\napp.listen = function listen() {\n  var server = http.createServer(this);\n  return server.listen.apply(server, arguments);\n};\n\n/**\n * Log error using console.error.\n *\n * @param {Error} err\n * @private\n */\n\nfunction logerror(err) {\n  /* istanbul ignore next */\n  if (this.get('env') !== 'test') console.error(err.stack || err.toString());\n}\n\n/**\n * Try rendering a view.\n * @private\n */\n\nfunction tryRender(view, options, callback) {\n  try {\n    view.render(options, callback);\n  } catch (err) {\n    callback(err);\n  }\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","logerror","err","get","console","error","stack","toString","finalhandler","Router","methods","middleware","query","debug","View","http","compileETag","compileQueryParser","compileTrust","deprecate","flatten","merge","resolve","setPrototypeOf","slice","Array","prototype","app","init","app.init","cache","engines","settings","defaultConfiguration","app.defaultConfiguration","enable","set","NODE_ENV","Object","defineProperty","trustProxyDefaultSymbol","configurable","value","on","onmount","parent","request","response","locals","create","mountpath","Error","lazyrouter","app.lazyrouter","_router","caseSensitive","enabled","strict","use","handle","app.handle","req","res","callback","router","done","env","onerror","bind","app.use","fn","offset","path","arg","isArray","length","fns","call","arguments","TypeError","forEach","mounted_app","next","orig","emit","route","app.route","engine","app.engine","ext","extension","param","app.param","name","i","app.set","setting","val","app.path","app.enabled","disabled","app.disabled","app.enable","disable","app.disable","method","apply","all","app.all","args","del","function","delete","render","app.render","options","opts","renderOptions","view","_locals","defaultEngine","root","dirs","join","listen","app.listen","server","createServer"]
}
