shadow$provide.module$node_modules$express$lib$response=function(global,require,module,exports){function sendfile(res$jscomp$0,file,options,callback){function onaborted(){if(!done){done=!0;var err=Error("Request aborted");err.code="ECONNABORTED";callback(err)}}function onerror(err){done||(done=!0,callback(err))}var done=!1,streaming;file.on("directory",function(){if(!done){done=!0;var err=Error("EISDIR, read");err.code="EISDIR";callback(err)}});file.on("end",function(){done||(done=!0,callback())});
file.on("error",onerror);file.on("file",function(){streaming=!1});file.on("stream",function(){streaming=!0});onFinished(res$jscomp$0,function(err){if(err&&"ECONNRESET"===err.code)return onaborted();if(err)return onerror(err);done||setImmediate(function(){!1===streaming||done?done||(done=!0,callback()):onaborted()})});if(options.headers)file.on("headers",function(res){for(var obj=options.headers,keys=Object.keys(obj),i=0;i<keys.length;i++){var k=keys[i];res.setHeader(k,obj[k])}});file.pipe(res$jscomp$0)}
function stringify(value,replacer,spaces,escape){value=replacer||spaces?JSON.stringify(value,replacer,spaces):JSON.stringify(value);escape&&(value=value.replace(/[<>&]/g,function(c){switch(c.charCodeAt(0)){case 60:return"\\u003c";case 62:return"\\u003e";case 38:return"\\u0026";default:return c}}));return value}var Buffer=require("module$node_modules$safe_buffer$index").Buffer,contentDisposition=require("module$node_modules$content_disposition$index"),deprecate=require("module$node_modules$depd$lib$browser$index")("express"),
encodeUrl=require("module$node_modules$encodeurl$index"),escapeHtml=require("module$node_modules$escape_html$index");global=require("module$node_modules$stream_http$index");var isAbsolute=require("module$node_modules$express$lib$utils").isAbsolute,onFinished=require("module$node_modules$on_finished$index");exports=require("module$node_modules$path_browserify$index");var statuses=require("module$node_modules$statuses$index"),merge=require("module$node_modules$utils_merge$index"),sign=require("module$node_modules$cookie_signature$index").sign,
normalizeType=require("module$node_modules$express$lib$utils").normalizeType,normalizeTypes=require("module$node_modules$express$lib$utils").normalizeTypes,setCharset=require("module$node_modules$express$lib$utils").setCharset,cookie=require("module$node_modules$cookie$index"),send=require("module$node_modules$send$index"),extname=exports.extname,mime=send.mime,resolve=exports.resolve,vary=require("module$node_modules$vary$index");require=Object.create(global.ServerResponse.prototype);module.exports=
require;var charsetRegExp=/;\s*charset\s*=/;require.status=function(code){this.statusCode=code;return this};require.links=function(links){var link=this.get("Link")||"";link&&(link+=", ");return this.set("Link",link+Object.keys(links).map(function(rel){return"\x3c"+links[rel]+'\x3e; rel\x3d"'+rel+'"'}).join(", "))};require.send=function(body){var chunk=body,req=this.req,app=this.app;2===arguments.length&&("number"!==typeof arguments[0]&&"number"===typeof arguments[1]?(deprecate("res.send(body, status): Use res.status(status).send(body) instead"),
this.statusCode=arguments[1]):(deprecate("res.send(status, body): Use res.status(status).send(body) instead"),this.statusCode=arguments[0],chunk=arguments[1]));"number"===typeof chunk&&1===arguments.length&&(this.get("Content-Type")||this.type("txt"),deprecate("res.send(status): Use res.sendStatus(status) instead"),this.statusCode=chunk,chunk=statuses[chunk]);switch(typeof chunk){case "string":this.get("Content-Type")||this.type("html");break;case "boolean":case "number":case "object":if(null===chunk)chunk=
"";else if(Buffer.isBuffer(chunk))this.get("Content-Type")||this.type("bin");else return this.json(chunk)}if("string"===typeof chunk){var encoding="utf8";var type=this.get("Content-Type");"string"===typeof type&&this.set("Content-Type",setCharset(type,"utf-8"))}type=app.get("etag fn");app=!this.get("ETag")&&"function"===typeof type;if(void 0!==chunk){if(Buffer.isBuffer(chunk))var len=chunk.length;else!app&&1E3>chunk.length?len=Buffer.byteLength(chunk,encoding):(chunk=Buffer.from(chunk,encoding),encoding=
void 0,len=chunk.length);this.set("Content-Length",len)}var etag;app&&void 0!==len&&(etag=type(chunk,encoding))&&this.set("ETag",etag);req.fresh&&(this.statusCode=304);if(204===this.statusCode||304===this.statusCode)this.removeHeader("Content-Type"),this.removeHeader("Content-Length"),this.removeHeader("Transfer-Encoding"),chunk="";"HEAD"===req.method?this.end():this.end(chunk,encoding);return this};require.json=function(obj){var val=obj;2===arguments.length&&("number"===typeof arguments[1]?(deprecate("res.json(obj, status): Use res.status(status).json(obj) instead"),
this.statusCode=arguments[1]):(deprecate("res.json(status, obj): Use res.status(status).json(obj) instead"),this.statusCode=arguments[0],val=arguments[1]));var app=this.app,escape=app.get("json escape"),replacer=app.get("json replacer");app=app.get("json spaces");val=stringify(val,replacer,app,escape);this.get("Content-Type")||this.set("Content-Type","application/json");return this.send(val)};require.jsonp=function(obj){var val=obj;2===arguments.length&&("number"===typeof arguments[1]?(deprecate("res.jsonp(obj, status): Use res.status(status).json(obj) instead"),
this.statusCode=arguments[1]):(deprecate("res.jsonp(status, obj): Use res.status(status).jsonp(obj) instead"),this.statusCode=arguments[0],val=arguments[1]));var app=this.app,escape=app.get("json escape"),replacer=app.get("json replacer"),spaces=app.get("json spaces");val=stringify(val,replacer,spaces,escape);app=this.req.query[app.get("jsonp callback name")];this.get("Content-Type")||(this.set("X-Content-Type-Options","nosniff"),this.set("Content-Type","application/json"));Array.isArray(app)&&(app=
app[0]);"string"===typeof app&&0!==app.length&&(this.set("X-Content-Type-Options","nosniff"),this.set("Content-Type","text/javascript"),app=app.replace(/[^\[\]\w$.]/g,""),val=val.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"),val="/**/ typeof "+app+" \x3d\x3d\x3d 'function' \x26\x26 "+app+"("+val+");");return this.send(val)};require.sendStatus=function(statusCode){var body=statuses[statusCode]||String(statusCode);this.statusCode=statusCode;this.type("txt");return this.send(body)};require.sendFile=
function(path,options,callback){var done=callback,req=this.req,next=req.next;callback=options||{};if(!path)throw new TypeError("path argument is required to res.sendFile");if("string"!==typeof path)throw new TypeError("path must be a string to res.sendFile");"function"===typeof options&&(done=options,callback={});if(!callback.root&&!isAbsolute(path))throw new TypeError("path must be absolute or specify root to res.sendFile");path=encodeURI(path);path=send(req,path,callback);sendfile(this,path,callback,
function(err){if(done)return done(err);if(err&&"EISDIR"===err.code)return next();err&&"ECONNABORTED"!==err.code&&"write"!==err.syscall&&next(err)})};require.sendfile=function(path,options,callback){var done=callback,req=this.req,next=req.next;callback=options||{};"function"===typeof options&&(done=options,callback={});path=send(req,path,callback);sendfile(this,path,callback,function(err){if(done)return done(err);if(err&&"EISDIR"===err.code)return next();err&&"ECONNABORTED"!==err.code&&"write"!==err.syscall&&
next(err)})};require.sendfile=deprecate.function(require.sendfile,"res.sendfile: Use res.sendFile instead");require.download=function(path,filename,options,callback){var name=filename,opts=options||null;"function"===typeof filename?(callback=filename,opts=name=null):"function"===typeof options&&(callback=options,opts=null);filename={"Content-Disposition":contentDisposition(name||path)};if(opts&&opts.headers)for(options=Object.keys(opts.headers),name=0;name<options.length;name++){var key=options[name];
"content-disposition"!==key.toLowerCase()&&(filename[key]=opts.headers[key])}opts=Object.create(opts);opts.headers=filename;path=resolve(path);return this.sendFile(path,opts,callback)};require.contentType=require.type=function(type){type=-1===type.indexOf("/")?mime.lookup(type):type;return this.set("Content-Type",type)};require.format=function(obj){var req=this.req,next=req.next,fn=obj.default;fn&&delete obj.default;var keys=Object.keys(obj),key=0<keys.length?req.accepts(keys):!1;this.vary("Accept");
key?(this.set("Content-Type",normalizeType(key).value),obj[key](req,this,next)):fn?fn():(obj=Error("Not Acceptable"),obj.status=obj.statusCode=406,obj.types=normalizeTypes(keys).map(function(o){return o.value}),next(obj));return this};require.attachment=function(filename){filename&&this.type(extname(filename));this.set("Content-Disposition",contentDisposition(filename));return this};require.append=function(field,val){var prev=this.get(field),value=val;prev&&(value=Array.isArray(prev)?prev.concat(val):
Array.isArray(val)?[prev].concat(val):[prev,val]);return this.set(field,value)};require.set=require.header=function(field,val){if(2===arguments.length){var value=Array.isArray(val)?val.map(String):String(val);if("content-type"===field.toLowerCase()){if(Array.isArray(value))throw new TypeError("Content-Type cannot be set to an Array");if(!charsetRegExp.test(value)){var charset=mime.charsets.lookup(value.split(";")[0]);charset&&(value+="; charset\x3d"+charset.toLowerCase())}}this.setHeader(field,value)}else for(value in field)this.set(value,
field[value]);return this};require.get=function(field){return this.getHeader(field)};require.clearCookie=function(name,options){options=merge({expires:new Date(1),path:"/"},options);return this.cookie(name,"",options)};require.cookie=function(name,value,options){options=merge({},options);var secret=this.req.secret,signed=options.signed;if(signed&&!secret)throw Error('cookieParser("secret") required for signed cookies');value="object"===typeof value?"j:"+JSON.stringify(value):String(value);signed&&
(value="s:"+sign(value,secret));"maxAge"in options&&(options.expires=new Date(Date.now()+options.maxAge),options.maxAge/=1E3);null==options.path&&(options.path="/");this.append("Set-Cookie",cookie.serialize(name,String(value),options));return this};require.location=function(url){var loc=url;"back"===url&&(loc=this.req.get("Referrer")||"/");return this.set("Location",encodeUrl(loc))};require.redirect=function(url){var address=url,body,status=302;2===arguments.length&&("number"===typeof arguments[0]?
(status=arguments[0],address=arguments[1]):(deprecate("res.redirect(url, status): Use res.redirect(status, url) instead"),status=arguments[1]));address=this.location(address).get("Location");this.format({text:function(){body=statuses[status]+". Redirecting to "+address},html:function(){var u=escapeHtml(address);body="\x3cp\x3e"+statuses[status]+'. Redirecting to \x3ca href\x3d"'+u+'"\x3e'+u+"\x3c/a\x3e\x3c/p\x3e"},default:function(){body=""}});this.statusCode=status;this.set("Content-Length",Buffer.byteLength(body));
"HEAD"===this.req.method?this.end():this.end(body)};require.vary=function(field){if(!field||Array.isArray(field)&&!field.length)return deprecate("res.vary(): Provide a field name"),this;vary(this,field);return this};require.render=function(view,options,callback){var app=this.req.app,opts=options||{},req=this.req,self=this;"function"===typeof options&&(callback=options,opts={});opts._locals=self.locals;callback=callback||function(err,str){if(err)return req.next(err);self.send(str)};app.render(view,
opts,callback)}}
//# sourceMappingURL=module$node_modules$express$lib$response.js.map
