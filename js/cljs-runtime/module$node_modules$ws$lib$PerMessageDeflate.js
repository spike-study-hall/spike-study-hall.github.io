shadow$provide.module$node_modules$ws$lib$PerMessageDeflate=function(global,require,module,exports){function deflateOnData(chunk){this[kBuffers].push(chunk);this[kTotalLength]+=chunk.length}function inflateOnData(chunk){this[kTotalLength]+=chunk.length;1>this[kOwner]._maxPayload||this[kTotalLength]<=this[kOwner]._maxPayload?this[kBuffers].push(chunk):(this[kError]=Error("max payload size exceeded"),this[kError].closeCode=1009,this.removeListener("data",inflateOnData),this.reset())}function inflateOnError(err){this[kOwner]._inflate=
null;this[kCallback](err)}var process=require("module$node_modules$process$browser");"use strict";global=require("module$node_modules$safe_buffer$index");var Limiter=require("module$node_modules$async_limiter$index"),zlib=require("module$node_modules$browserify_zlib$lib$index"),bufferUtil=require("module$node_modules$ws$lib$BufferUtil");require=global.Buffer;var TRAILER=require.from([0,0,255,255]),EMPTY_BLOCK=require.from([0]);$jscomp.initSymbol();var kWriteInProgress=Symbol("write-in-progress");
$jscomp.initSymbol();var kPendingClose=Symbol("pending-close");$jscomp.initSymbol();var kTotalLength=Symbol("total-length");$jscomp.initSymbol();var kCallback=Symbol("callback");$jscomp.initSymbol();var kBuffers=Symbol("buffers");$jscomp.initSymbol();var kError=Symbol("error");$jscomp.initSymbol();var kOwner=Symbol("owner"),zlibLimiter;require=function(options,isServer,maxPayload){this._maxPayload=maxPayload|0;this._options=options||{};this._threshold=void 0!==this._options.threshold?this._options.threshold:
1024;this._isServer=!!isServer;this.params=this._inflate=this._deflate=null;zlibLimiter||(zlibLimiter=new Limiter({concurrency:void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10}))};require.prototype.offer=function(){var params={};this._options.serverNoContextTakeover&&(params.server_no_context_takeover=!0);this._options.clientNoContextTakeover&&(params.client_no_context_takeover=!0);this._options.serverMaxWindowBits&&(params.server_max_window_bits=this._options.serverMaxWindowBits);
this._options.clientMaxWindowBits?params.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(params.client_max_window_bits=!0);return params};require.prototype.accept=function(paramsList){paramsList=this.normalizeParams(paramsList);return this.params=paramsList=this._isServer?this.acceptAsServer(paramsList):this.acceptAsClient(paramsList)};require.prototype.cleanup=function(){this._inflate&&(this._inflate[kWriteInProgress]?this._inflate[kPendingClose]=
!0:(this._inflate.close(),this._inflate=null));this._deflate&&(this._deflate[kWriteInProgress]?this._deflate[kPendingClose]=!0:(this._deflate.close(),this._deflate=null))};require.prototype.acceptAsServer=function(paramsList){var $jscomp$this=this,accepted={};if(!paramsList.some(function(params){if(!(!1===$jscomp$this._options.serverNoContextTakeover&&params.server_no_context_takeover||!1===$jscomp$this._options.serverMaxWindowBits&&params.server_max_window_bits||"number"===typeof $jscomp$this._options.serverMaxWindowBits&&
"number"===typeof params.server_max_window_bits&&$jscomp$this._options.serverMaxWindowBits>params.server_max_window_bits||"number"===typeof $jscomp$this._options.clientMaxWindowBits&&!params.client_max_window_bits)){if($jscomp$this._options.serverNoContextTakeover||params.server_no_context_takeover)accepted.server_no_context_takeover=!0;if($jscomp$this._options.clientNoContextTakeover||!1!==$jscomp$this._options.clientNoContextTakeover&&params.client_no_context_takeover)accepted.client_no_context_takeover=
!0;"number"===typeof $jscomp$this._options.serverMaxWindowBits?accepted.server_max_window_bits=$jscomp$this._options.serverMaxWindowBits:"number"===typeof params.server_max_window_bits&&(accepted.server_max_window_bits=params.server_max_window_bits);"number"===typeof $jscomp$this._options.clientMaxWindowBits?accepted.client_max_window_bits=$jscomp$this._options.clientMaxWindowBits:!1!==$jscomp$this._options.clientMaxWindowBits&&"number"===typeof params.client_max_window_bits&&(accepted.client_max_window_bits=
params.client_max_window_bits);return!0}}))throw Error("Doesn't support the offered configuration");return accepted};require.prototype.acceptAsClient=function(paramsList){paramsList=paramsList[0];if(!1===this._options.clientNoContextTakeover&&paramsList.client_no_context_takeover)throw Error('Invalid value for "client_no_context_takeover"');if("number"===typeof this._options.clientMaxWindowBits&&(!paramsList.client_max_window_bits||paramsList.client_max_window_bits>this._options.clientMaxWindowBits)||
!1===this._options.clientMaxWindowBits&&paramsList.client_max_window_bits)throw Error('Invalid value for "client_max_window_bits"');return paramsList};require.prototype.normalizeParams=function(paramsList){var $jscomp$this=this;return paramsList.map(function(params){Object.keys(params).forEach(function(key){var value=params[key];if(1<value.length)throw Error("Multiple extension parameters for "+key);value=value[0];switch(key){case "server_no_context_takeover":case "client_no_context_takeover":if(!0!==
value)throw Error("invalid extension parameter value for "+key+" ("+value+")");params[key]=!0;break;case "server_max_window_bits":case "client_max_window_bits":if("string"===typeof value&&(value=parseInt(value,10),Number.isNaN(value)||value<zlib.Z_MIN_WINDOWBITS||value>zlib.Z_MAX_WINDOWBITS))throw Error("invalid extension parameter value for "+key+" ("+value+")");if(!$jscomp$this._isServer&&!0===value)throw Error("Missing extension parameter value for "+key);params[key]=value;break;default:throw Error("Not defined extension parameter ("+
key+")");}});return params})};require.prototype.decompress=function(data,fin,callback){var $jscomp$this=this;zlibLimiter.push(function(done){$jscomp$this._decompress(data,fin,function(err,result){done();callback(err,result)})})};require.prototype.compress=function(data,fin,callback){var $jscomp$this=this;zlibLimiter.push(function(done){$jscomp$this._compress(data,fin,function(err,result){done();callback(err,result)})})};require.prototype._decompress=function(data,fin,callback){var $jscomp$this=this,
endpoint=this._isServer?"client":"server";if(!this._inflate){var key=endpoint+"_max_window_bits";this._inflate=zlib.createInflateRaw({windowBits:"number"!==typeof this.params[key]?zlib.Z_DEFAULT_WINDOWBITS:this.params[key]});this._inflate[kTotalLength]=0;this._inflate[kBuffers]=[];this._inflate[kOwner]=this;this._inflate.on("error",inflateOnError);this._inflate.on("data",inflateOnData)}this._inflate[kCallback]=callback;this._inflate[kWriteInProgress]=!0;this._inflate.write(data);fin&&this._inflate.write(TRAILER);
this._inflate.flush(function(){var err=$jscomp$this._inflate[kError];err?($jscomp$this._inflate.close(),$jscomp$this._inflate=null,callback(err)):(err=bufferUtil.concat($jscomp$this._inflate[kBuffers],$jscomp$this._inflate[kTotalLength]),fin&&$jscomp$this.params[endpoint+"_no_context_takeover"]||$jscomp$this._inflate[kPendingClose]?($jscomp$this._inflate.close(),$jscomp$this._inflate=null):($jscomp$this._inflate[kWriteInProgress]=!1,$jscomp$this._inflate[kTotalLength]=0,$jscomp$this._inflate[kBuffers]=
[]),callback(null,err))})};require.prototype._compress=function(data$jscomp$0,fin,callback){var $jscomp$this=this;if(data$jscomp$0&&0!==data$jscomp$0.length){var endpoint=this._isServer?"server":"client";if(!this._deflate){var key=endpoint+"_max_window_bits";this._deflate=zlib.createDeflateRaw({memLevel:this._options.memLevel,level:this._options.level,flush:zlib.Z_SYNC_FLUSH,windowBits:"number"!==typeof this.params[key]?zlib.Z_DEFAULT_WINDOWBITS:this.params[key]});this._deflate[kTotalLength]=0;this._deflate[kBuffers]=
[];this._deflate.on("data",deflateOnData)}this._deflate[kWriteInProgress]=!0;this._deflate.write(data$jscomp$0);this._deflate.flush(zlib.Z_SYNC_FLUSH,function(){var data=bufferUtil.concat($jscomp$this._deflate[kBuffers],$jscomp$this._deflate[kTotalLength]);fin&&(data=data.slice(0,data.length-4));fin&&$jscomp$this.params[endpoint+"_no_context_takeover"]||$jscomp$this._deflate[kPendingClose]?($jscomp$this._deflate.close(),$jscomp$this._deflate=null):($jscomp$this._deflate[kWriteInProgress]=!1,$jscomp$this._deflate[kTotalLength]=
0,$jscomp$this._deflate[kBuffers]=[]);callback(null,data)})}else process.nextTick(callback,null,EMPTY_BLOCK)};$jscomp.global.Object.defineProperties(require,{extensionName:{configurable:!0,enumerable:!0,get:function(){return"permessage-deflate"}}});module.exports=require}
//# sourceMappingURL=module$node_modules$ws$lib$PerMessageDeflate.js.map
