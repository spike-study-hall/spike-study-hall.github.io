shadow$provide.module$node_modules$negotiator$lib$mediaType=function(global,require,module,exports){function parseAccept(accept){accept=accept.split(",");for(var i=1,j=0;i<accept.length;i++)0==quoteCount(accept[j])%2?accept[++j]=accept[i]:accept[j]+=","+accept[i];accept.length=j+1;for(j=i=0;i<accept.length;i++){var mediaType=parseMediaType(accept[i].trim(),i);mediaType&&(accept[j++]=mediaType)}accept.length=j;return accept}function parseMediaType(str,i$jscomp$0){var match=simpleMediaTypeRegExp.exec(str);
if(!match)return null;str=Object.create(null);var q=1,subtype=match[2],type=match[1];if(match[3]){match=match[3].split(";");for(var i=1,j=0;i<match.length;i++)0==quoteCount(match[j])%2?match[++j]=match[i]:match[j]+=";"+match[i];match.length=j+1;for(i=0;i<match.length;i++)match[i]=match[i].trim();match=match.map(splitKeyValuePair);for(i=0;i<match.length;i++){var pair=match[i];j=pair[0].toLowerCase();pair=(pair=pair[1])&&'"'===pair[0]&&'"'===pair[pair.length-1]?pair.substr(1,pair.length-2):pair;if("q"===
j){q=parseFloat(pair);break}str[j]=pair}}return{type:type,subtype:subtype,params:str,q:q,i:i$jscomp$0}}function specify(type,spec,index){var p=parseMediaType(type);type=0;if(!p)return null;if(spec.type.toLowerCase()==p.type.toLowerCase())type|=4;else if("*"!=spec.type)return null;if(spec.subtype.toLowerCase()==p.subtype.toLowerCase())type|=2;else if("*"!=spec.subtype)return null;var keys=Object.keys(spec.params);if(0<keys.length)if(keys.every(function(k){return"*"==spec.params[k]||(spec.params[k]||
"").toLowerCase()==(p.params[k]||"").toLowerCase()}))type|=1;else return null;return{i:index,o:spec.i,q:spec.q,s:type}}function preferredMediaTypes(accept,provided){var accepts=parseAccept(void 0===accept?"*/*":accept||"");if(!provided)return accepts.filter(isQuality).sort(compareSpecs).map(getFullType);var priorities=provided.map(function(type,index){for(var priority={o:-1,q:0,s:0},i=0;i<accepts.length;i++){var spec=specify(type,accepts[i],index);spec&&0>(priority.s-spec.s||priority.q-spec.q||priority.o-
spec.o)&&(priority=spec)}return priority});return priorities.filter(isQuality).sort(compareSpecs).map(function(priority){return provided[priorities.indexOf(priority)]})}function compareSpecs(a,b){return b.q-a.q||b.s-a.s||a.o-b.o||a.i-b.i||0}function getFullType(spec){return spec.type+"/"+spec.subtype}function isQuality(spec){return 0<spec.q}function quoteCount(string){for(var count=0,index=0;-1!==(index=string.indexOf('"',index));)count++,index++;return count}function splitKeyValuePair(str){var index=
str.indexOf("\x3d");if(-1===index)var key=str;else{key=str.substr(0,index);var val=str.substr(index+1)}return[key,val]}module.exports=preferredMediaTypes;module.exports.preferredMediaTypes=preferredMediaTypes;var simpleMediaTypeRegExp=/^\s*([^\s\/;]+)\/([^;\s]+)\s*(?:;(.*))?$/}
//# sourceMappingURL=module$node_modules$negotiator$lib$mediaType.js.map
