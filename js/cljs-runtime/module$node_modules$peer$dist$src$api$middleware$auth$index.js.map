{
"version":3,
"file":"module$node_modules$peer$dist$src$api$middleware$auth$index.js",
"lineCount":2,
"mappings":"AAAAA,cAAA,4DAAA,CAAgF,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAExHC,MAAAC,eAAA,CAAsBF,OAAtB,CAA+B,YAA/B,CAA6C,CAAEG,MAAO,CAAA,CAAT,CAA7C,CACA,KAAMC,QAAUN,OAAA,CAAQ,yCAAR,CAwBhBE,QAAAK,eAAA,CAtBIC,QAAW,CAACC,MAAD,CAASC,KAAT,CAAgB,CAAA,IAAA,aAAA,IACvB,KAAAD,OAAA,CAAcA,MACd,KAAAC,MAAA,CAAaA,KACb,KAAAC,OAAA,CAAcC,QAAA,CAACC,GAAD,CAAMC,GAAN,CAAWC,IAAX,CAAoB,CACxB,IAAA,4BAAqBF,GAAAG,OAArB,CAAEC,GAAA,2BAAA,GAAIC,IAAAA,CAAA,2BAAA,MACZ,IADmB,2BAAAC,IACnB;AAAY,YAAAV,OAAAU,IAAZ,CACI,MAAOL,IAAAM,OAAA,CAAW,GAAX,CAAAC,KAAA,CAAqBf,OAAAgB,OAAAC,YAArB,CAEX,IAAI,CAACN,EAAL,CACI,MAAOH,IAAAU,WAAA,CAAe,GAAf,CAELC,4BAAAA,CAAS,YAAAf,MAAAgB,cAAA,CAAyBT,EAAzB,CACf,IAAI,CAACQ,2BAAL,CACI,MAAOX,IAAAU,WAAA,CAAe,GAAf,CAEX,IAAIC,2BAAAE,SAAA,EAAJ,EAAyBT,GAAzB,GAAmCO,2BAAAE,SAAA,EAAnC,CACI,MAAOb,IAAAM,OAAA,CAAW,GAAX,CAAAC,KAAA,CAAqBf,OAAAgB,OAAAM,cAArB,CAEXb,KAAA,EAf8B,CAHX,CALyF;",
"sources":["node_modules/peer/dist/src/api/middleware/auth/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$peer$dist$src$api$middleware$auth$index\"] = function(global,require,module,exports) {\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst enums_1 = require(\"../../../enums\");\nclass AuthMiddleware {\n    constructor(config, realm) {\n        this.config = config;\n        this.realm = realm;\n        this.handle = (req, res, next) => {\n            const { id, token, key } = req.params;\n            if (key !== this.config.key) {\n                return res.status(401).send(enums_1.Errors.INVALID_KEY);\n            }\n            if (!id) {\n                return res.sendStatus(401);\n            }\n            const client = this.realm.getClientById(id);\n            if (!client) {\n                return res.sendStatus(401);\n            }\n            if (client.getToken() && token !== client.getToken()) {\n                return res.status(401).send(enums_1.Errors.INVALID_TOKEN);\n            }\n            next();\n        };\n    }\n}\nexports.AuthMiddleware = AuthMiddleware;\n\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","enums_1","AuthMiddleware","constructor","config","realm","handle","this.handle","req","res","next","params","id","token","key","status","send","Errors","INVALID_KEY","sendStatus","client","getClientById","getToken","INVALID_TOKEN"]
}
