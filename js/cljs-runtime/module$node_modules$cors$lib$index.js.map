{
"version":3,
"file":"module$node_modules$cors$lib$index.js",
"lineCount":8,
"mappings":"AAAAA,cAAA,mCAAA,CAAuD,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAC9F,SAAS,EAAG,CAcXC,QAASA,SAAQ,CAACC,CAAD,CAAI,CACnB,MAAoB,QAApB,GAAO,MAAOA,EAAd,EAAgCA,CAAhC,WAA6CC,OAD1B,CAIrBC,QAASA,gBAAe,CAACC,MAAD,CAASC,aAAT,CAAwB,CAC9C,GAAIC,KAAAC,QAAA,CAAcF,aAAd,CAAJ,CAAkC,CAChC,IAAK,IAAIG,EAAI,CAAb,CAAgBA,CAAhB,CAAoBH,aAAAI,OAApB,CAA0C,EAAED,CAA5C,CACE,GAAIL,eAAA,CAAgBC,MAAhB,CAAwBC,aAAA,CAAcG,CAAd,CAAxB,CAAJ,CACE,MAAO,CAAA,CAGX,OAAO,CAAA,CANyB,CAO3B,MAAIR,SAAA,CAASK,aAAT,CAAJ,CACED,MADF,GACaC,aADb,CAEIA,aAAJ,WAA6BK,OAA7B,CACEL,aAAAM,KAAA,CAAmBP,MAAnB,CADF,CAGE,CAAC,CAACC,aAbmC,CAiBhDO,QAASA,gBAAe,CAACC,OAAD;AAAUC,GAAV,CAAe,CACjCC,GAAAA,CAAgBD,GAAAE,QAAAZ,OADiB,KAEnCY,QAAU,EAGPH,QAAAT,OAAL,EAA0C,GAA1C,GAAuBS,OAAAT,OAAvB,EAMWJ,QAAA,CAASa,OAAAT,OAAT,CAAJ,CAELY,OAAAC,KAAA,CAAa,CAAC,CACZC,IAAK,6BADO,CAEZC,MAAON,OAAAT,OAFK,CAAD,CAAb,CAFK,EAWLgB,OAEA,CAFYjB,eAAA,CAAgBY,GAAhB,CAA+BF,OAAAT,OAA/B,CAEZ,CAAAY,OAAAC,KAAA,CAAa,CAAC,CACZC,IAAK,6BADO,CAEZC,MAAOC,OAAA,CAAYL,GAAZ,CAA4B,CAAA,CAFvB,CAAD,CAAb,CAbK,CAML,CAAAC,OAAAC,KAAA,CAAa,CAAC,CACZC,IAAK,MADO,CAEZC,MAAO,QAFK,CAAD,CAAb,CAZF,EAEEH,OAAAC,KAAA,CAAa,CAAC,CACZC,IAAK,6BADO,CAEZC,MAAO,GAFK,CAAD,CAAb,CA2BF,OAAOH,QAlC8B,CAqCvCK,QAASA,iBAAgB,CAACR,OAAD,CAAU,CACjC,IAAIS,QAAUT,OAAAS,QACVA,QAAAC,KAAJ,GACED,OADF;AACYT,OAAAS,QAAAC,KAAA,CAAqB,GAArB,CADZ,CAGA,OAAO,CACLL,IAAK,8BADA,CAELC,MAAOG,OAFF,CAL0B,CAWnCE,QAASA,qBAAoB,CAACX,OAAD,CAAU,CACrC,MAA4B,CAAA,CAA5B,GAAIA,OAAAY,YAAJ,CACS,CACLP,IAAK,kCADA,CAELC,MAAO,MAFF,CADT,CAMO,IAP8B,CAUvCO,QAASA,wBAAuB,CAACb,OAAD,CAAUC,GAAV,CAAe,CACzCa,OAAAA,CAAiBd,OAAAc,eAAjBA,EAA2Cd,OAAAG,QAC/C,KAAIA,QAAU,EAETW,QAAL,CAMWA,OAAAJ,KANX,GAOEI,OAPF,CAOmBA,OAAAJ,KAAA,CAAoB,GAApB,CAPnB,GACEI,OACA,CADiBb,GAAAE,QAAA,CAAY,gCAAZ,CACjB,CAAAA,OAAAC,KAAA,CAAa,CAAC,CACZC,IAAK,MADO,CAEZC,MAAO,gCAFK,CAAD,CAAb,CAFF,CASIQ,QAAJ;AAAsBA,OAAAlB,OAAtB,EACEO,OAAAC,KAAA,CAAa,CAAC,CACZC,IAAK,8BADO,CAEZC,MAAOQ,OAFK,CAAD,CAAb,CAMF,OAAOX,QApBsC,CAuB/CY,QAASA,wBAAuB,CAACf,OAAD,CAAU,CAExC,GADIG,OACJ,CADcH,OAAAgB,eACd,CAEWb,OAAAO,KAAJ,GACLP,OADK,CACKA,OAAAO,KAAA,CAAa,GAAb,CADL,CAFP,KACE,OAAO,KAIT,OAAIP,QAAJ,EAAeA,OAAAP,OAAf,CACS,CACLS,IAAK,+BADA,CAELC,MAAOH,OAFF,CADT,CAMO,IAbiC,CAgB1Cc,QAASA,gBAAe,CAACjB,OAAD,CAAU,CAEhC,MAAA,CADIkB,OACJ,EADwC,QACxC,GADc,MAAOlB,QAAAkB,OACrB,EADoDlB,OAAAkB,OACpD,GADuElB,OAAAkB,OAAAC,SAAA,EACvE,GAAcD,OAAAtB,OAAd,CACS,CACLS,IAAK,wBADA,CAELC,MAAOY,OAFF,CADT;AAMO,IARyB,CAWlCE,QAASA,aAAY,CAACjB,OAAD,CAAUkB,GAAV,CAAe,CAClC,IADkC,IACzB1B,EAAI,CADqB,CAClB2B,EAAInB,OAAAP,OAApB,CAAoCD,CAApC,CAAwC2B,CAAxC,CAA2C3B,CAAA,EAA3C,CAAgD,CAC9C,IAAI4B,OAASpB,OAAA,CAAQR,CAAR,CACT4B,OAAJ,GACM9B,KAAAC,QAAA,CAAc6B,MAAd,CAAJ,CACEH,YAAA,CAAaG,MAAb,CAAqBF,GAArB,CADF,CAE0B,MAAnB,GAAIE,MAAAlB,IAAJ,EAA6BkB,MAAAjB,MAA7B,CACLkB,IAAA,CAAKH,GAAL,CAAUE,MAAAjB,MAAV,CADK,CAEIiB,MAAAjB,MAFJ,EAGLe,GAAAI,UAAA,CAAcF,MAAAlB,IAAd,CAA0BkB,MAAAjB,MAA1B,CANJ,CAF8C,CADd,CA3IpC,IAAIoB,OAAS1C,OAAA,CAAQ,yCAAR,CAAb,CACIwC,KAAOxC,OAAA,CAAQ,gCAAR,CADX,CAGI2C,SAAW,CACbpC,OAAQ,GADK,CAEbkB,QAAS,gCAFI,CAGbmB,kBAAmB,CAAA,CAHN,CAIbC,qBAAsB,GAJT,CAoOf5C,OAAAC,QAAA;AA5CA4C,QAA0B,CAACC,CAAD,CAAI,CAE5B,IAAIC,gBAAkB,IAEpBA,gBAAA,CADe,UAAjB,GAAI,MAAOD,EAAX,CACoBA,CADpB,CAGoBC,QAAS,CAAC/B,GAAD,CAAMgC,EAAN,CAAU,CACnCA,EAAA,CAAG,IAAH,CAASF,CAAT,CADmC,CAKvC,OAAOG,SAAuB,CAACjC,GAAD,CAAMoB,GAAN,CAAWc,IAAX,CAAiB,CAC7CH,eAAA,CAAgB/B,GAAhB,CAAqB,QAAS,CAACmC,GAAD,CAAMpC,OAAN,CAAe,CAC3C,GAAIoC,GAAJ,CACED,IAAA,CAAKC,GAAL,CADF,KAEO,CACL,IAAIC,YAAcX,MAAA,CAAO,EAAP,CAAWC,QAAX,CAAqB3B,OAArB,CACdsC,IAAAA,CAAiB,IACjBD,YAAA9C,OAAJ,EAAwD,UAAxD,GAA0B,MAAO8C,YAAA9C,OAAjC,CACE+C,GADF,CACmBD,WAAA9C,OADnB,CAEW8C,WAAA9C,OAFX,GAGE+C,GAHF,CAGmBA,QAAS,CAAC/C,MAAD,CAAS0C,EAAT,CAAa,CACrCA,EAAA,CAAG,IAAH,CAASI,WAAA9C,OAAT,CADqC,CAHzC,CAQI+C,IAAJ,CACEA,GAAA,CAAerC,GAAAE,QAAAZ,OAAf,CAAmC,QAAS,CAACgD,IAAD,CAAOhD,MAAP,CAAe,CACrDgD,IAAJ,EAAY,CAAChD,MAAb,CACE4C,IAAA,CAAKI,IAAL,CADF,EAGEF,WAAA9C,OA5DZ;AA4DiCA,MA5DjC,CAHIY,IAGJ,CAHc,EAGd,CAAe,SAAf,IA6D8BF,GA/DnBuC,OAEX,EA6D8BvC,GA/DLuC,OAAAC,YAEzB,EA6D8BxC,GA/DqBuC,OAAAC,YAAA,EAEnD,GAEEtC,IAAAC,KAAA,CAAaL,eAAA,CA2DEsC,WA3DF,CA2DepC,GA3Df,CAAb,CAQA,CAPAE,IAAAC,KAAA,CAAaO,oBAAA,CA0DE0B,WA1DF,CA0DepC,GA1Df,CAAb,CAOA,CANAE,IAAAC,KAAA,CAAaI,gBAAA,CAyDE6B,WAzDF,CAyDepC,GAzDf,CAAb,CAMA,CALAE,IAAAC,KAAA,CAAaS,uBAAA,CAwDEwB,WAxDF,CAwDepC,GAxDf,CAAb,CAKA,CAJAE,IAAAC,KAAA,CAAaa,eAAA,CAuDEoB,WAvDF,CAuDepC,GAvDf,CAAb,CAIA,CAHAE,IAAAC,KAAA,CAAaW,uBAAA,CAsDEsB,WAtDF,CAsDepC,GAtDf,CAAb,CAGA,CAFAmB,YAAA,CAAajB,IAAb,CAqDiCkB,GArDjC,CAEA,CAmDegB,WAnDXT,kBAAJ,CAmDsCO,IAlDpC,EADF,EAmDiCd,GA9C/BqB,WAEA,CA4CaL,WA9CIR,qBAEjB,CA4C+BR,GA7C/BI,UAAA,CAAc,gBAAd;AAAgC,GAAhC,CACA,CA4C+BJ,GA5C/BsB,IAAA,EAPF,CAVF,GAqBExC,IAAAC,KAAA,CAAaL,eAAA,CAwCEsC,WAxCF,CAwCepC,GAxCf,CAAb,CAIA,CAHAE,IAAAC,KAAA,CAAaO,oBAAA,CAuCE0B,WAvCF,CAuCepC,GAvCf,CAAb,CAGA,CAFAE,IAAAC,KAAA,CAAaW,uBAAA,CAsCEsB,WAtCF,CAsCepC,GAtCf,CAAb,CAEA,CADAmB,YAAA,CAAajB,IAAb,CAqCiCkB,GArCjC,CACA,CAoCsCc,IApCtC,EAzBF,CAyDU,CADyD,CAA3D,CADF,CAUEA,IAAA,EArBG,CAHoC,CAA7C,CAD6C,CAXnB,CA/LnB,CAAZ,CAAA,EAD8F;",
"sources":["node_modules/cors/lib/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$cors$lib$index\"] = function(global,require,module,exports) {\n(function () {\n\n  'use strict';\n\n  var assign = require('object-assign');\n  var vary = require('vary');\n\n  var defaults = {\n    origin: '*',\n    methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\n    preflightContinue: false,\n    optionsSuccessStatus: 204\n  };\n\n  function isString(s) {\n    return typeof s === 'string' || s instanceof String;\n  }\n\n  function isOriginAllowed(origin, allowedOrigin) {\n    if (Array.isArray(allowedOrigin)) {\n      for (var i = 0; i < allowedOrigin.length; ++i) {\n        if (isOriginAllowed(origin, allowedOrigin[i])) {\n          return true;\n        }\n      }\n      return false;\n    } else if (isString(allowedOrigin)) {\n      return origin === allowedOrigin;\n    } else if (allowedOrigin instanceof RegExp) {\n      return allowedOrigin.test(origin);\n    } else {\n      return !!allowedOrigin;\n    }\n  }\n\n  function configureOrigin(options, req) {\n    var requestOrigin = req.headers.origin,\n      headers = [],\n      isAllowed;\n\n    if (!options.origin || options.origin === '*') {\n      // allow any origin\n      headers.push([{\n        key: 'Access-Control-Allow-Origin',\n        value: '*'\n      }]);\n    } else if (isString(options.origin)) {\n      // fixed origin\n      headers.push([{\n        key: 'Access-Control-Allow-Origin',\n        value: options.origin\n      }]);\n      headers.push([{\n        key: 'Vary',\n        value: 'Origin'\n      }]);\n    } else {\n      isAllowed = isOriginAllowed(requestOrigin, options.origin);\n      // reflect origin\n      headers.push([{\n        key: 'Access-Control-Allow-Origin',\n        value: isAllowed ? requestOrigin : false\n      }]);\n      headers.push([{\n        key: 'Vary',\n        value: 'Origin'\n      }]);\n    }\n\n    return headers;\n  }\n\n  function configureMethods(options) {\n    var methods = options.methods;\n    if (methods.join) {\n      methods = options.methods.join(','); // .methods is an array, so turn it into a string\n    }\n    return {\n      key: 'Access-Control-Allow-Methods',\n      value: methods\n    };\n  }\n\n  function configureCredentials(options) {\n    if (options.credentials === true) {\n      return {\n        key: 'Access-Control-Allow-Credentials',\n        value: 'true'\n      };\n    }\n    return null;\n  }\n\n  function configureAllowedHeaders(options, req) {\n    var allowedHeaders = options.allowedHeaders || options.headers;\n    var headers = [];\n\n    if (!allowedHeaders) {\n      allowedHeaders = req.headers['access-control-request-headers']; // .headers wasn't specified, so reflect the request headers\n      headers.push([{\n        key: 'Vary',\n        value: 'Access-Control-Request-Headers'\n      }]);\n    } else if (allowedHeaders.join) {\n      allowedHeaders = allowedHeaders.join(','); // .headers is an array, so turn it into a string\n    }\n    if (allowedHeaders && allowedHeaders.length) {\n      headers.push([{\n        key: 'Access-Control-Allow-Headers',\n        value: allowedHeaders\n      }]);\n    }\n\n    return headers;\n  }\n\n  function configureExposedHeaders(options) {\n    var headers = options.exposedHeaders;\n    if (!headers) {\n      return null;\n    } else if (headers.join) {\n      headers = headers.join(','); // .headers is an array, so turn it into a string\n    }\n    if (headers && headers.length) {\n      return {\n        key: 'Access-Control-Expose-Headers',\n        value: headers\n      };\n    }\n    return null;\n  }\n\n  function configureMaxAge(options) {\n    var maxAge = (typeof options.maxAge === 'number' || options.maxAge) && options.maxAge.toString()\n    if (maxAge && maxAge.length) {\n      return {\n        key: 'Access-Control-Max-Age',\n        value: maxAge\n      };\n    }\n    return null;\n  }\n\n  function applyHeaders(headers, res) {\n    for (var i = 0, n = headers.length; i < n; i++) {\n      var header = headers[i];\n      if (header) {\n        if (Array.isArray(header)) {\n          applyHeaders(header, res);\n        } else if (header.key === 'Vary' && header.value) {\n          vary(res, header.value);\n        } else if (header.value) {\n          res.setHeader(header.key, header.value);\n        }\n      }\n    }\n  }\n\n  function cors(options, req, res, next) {\n    var headers = [],\n      method = req.method && req.method.toUpperCase && req.method.toUpperCase();\n\n    if (method === 'OPTIONS') {\n      // preflight\n      headers.push(configureOrigin(options, req));\n      headers.push(configureCredentials(options, req));\n      headers.push(configureMethods(options, req));\n      headers.push(configureAllowedHeaders(options, req));\n      headers.push(configureMaxAge(options, req));\n      headers.push(configureExposedHeaders(options, req));\n      applyHeaders(headers, res);\n\n      if (options.preflightContinue) {\n        next();\n      } else {\n        // Safari (and potentially other browsers) need content-length 0,\n        //   for 204 or they just hang waiting for a body\n        res.statusCode = options.optionsSuccessStatus;\n        res.setHeader('Content-Length', '0');\n        res.end();\n      }\n    } else {\n      // actual response\n      headers.push(configureOrigin(options, req));\n      headers.push(configureCredentials(options, req));\n      headers.push(configureExposedHeaders(options, req));\n      applyHeaders(headers, res);\n      next();\n    }\n  }\n\n  function middlewareWrapper(o) {\n    // if options are static (either via defaults or custom options passed in), wrap in a function\n    var optionsCallback = null;\n    if (typeof o === 'function') {\n      optionsCallback = o;\n    } else {\n      optionsCallback = function (req, cb) {\n        cb(null, o);\n      };\n    }\n\n    return function corsMiddleware(req, res, next) {\n      optionsCallback(req, function (err, options) {\n        if (err) {\n          next(err);\n        } else {\n          var corsOptions = assign({}, defaults, options);\n          var originCallback = null;\n          if (corsOptions.origin && typeof corsOptions.origin === 'function') {\n            originCallback = corsOptions.origin;\n          } else if (corsOptions.origin) {\n            originCallback = function (origin, cb) {\n              cb(null, corsOptions.origin);\n            };\n          }\n\n          if (originCallback) {\n            originCallback(req.headers.origin, function (err2, origin) {\n              if (err2 || !origin) {\n                next(err2);\n              } else {\n                corsOptions.origin = origin;\n                cors(corsOptions, req, res, next);\n              }\n            });\n          } else {\n            next();\n          }\n        }\n      });\n    };\n  }\n\n  // can pass either an options hash, an options delegate, or nothing\n  module.exports = middlewareWrapper;\n\n}());\n\n};"],
"names":["shadow$provide","global","require","module","exports","isString","s","String","isOriginAllowed","origin","allowedOrigin","Array","isArray","i","length","RegExp","test","configureOrigin","options","req","requestOrigin","headers","push","key","value","isAllowed","configureMethods","methods","join","configureCredentials","credentials","configureAllowedHeaders","allowedHeaders","configureExposedHeaders","exposedHeaders","configureMaxAge","maxAge","toString","applyHeaders","res","n","header","vary","setHeader","assign","defaults","preflightContinue","optionsSuccessStatus","middlewareWrapper","o","optionsCallback","cb","corsMiddleware","next","err","corsOptions","originCallback","err2","method","toUpperCase","statusCode","end"]
}
